# Comparing `tmp/nucliadb-2.7.0.post145-py3-none-any.whl.zip` & `tmp/nucliadb-2.7.0.post146-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,260 +1,261 @@
-Zip file size: 446553 bytes, number of entries: 258
--rw-r--r--  2.0 unx      891 b- defN 23-Apr-10 16:11 nucliadb/__init__.py
--rw-r--r--  2.0 unx     1027 b- defN 23-Apr-10 16:11 nucliadb/app.py
--rw-r--r--  2.0 unx     4556 b- defN 23-Apr-10 16:11 nucliadb/config.py
--rw-r--r--  2.0 unx     2785 b- defN 23-Apr-10 16:11 nucliadb/logging.py
--rw-r--r--  2.0 unx     1393 b- defN 23-Apr-10 16:11 nucliadb/purge.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-10 16:11 nucliadb/py.typed
--rw-r--r--  2.0 unx     3268 b- defN 23-Apr-10 16:11 nucliadb/run.py
--rw-r--r--  2.0 unx     1945 b- defN 23-Apr-10 16:11 nucliadb/settings.py
--rw-r--r--  2.0 unx     1011 b- defN 23-Apr-10 16:11 nucliadb/ingest/__init__.py
--rw-r--r--  2.0 unx     6338 b- defN 23-Apr-10 16:11 nucliadb/ingest/app.py
--rw-r--r--  2.0 unx      995 b- defN 23-Apr-10 16:11 nucliadb/ingest/cache.py
--rw-r--r--  2.0 unx     6874 b- defN 23-Apr-10 16:11 nucliadb/ingest/chitchat.py
--rw-r--r--  2.0 unx     2425 b- defN 23-Apr-10 16:11 nucliadb/ingest/partitions.py
--rw-r--r--  2.0 unx    14757 b- defN 23-Apr-10 16:11 nucliadb/ingest/processing.py
--rw-r--r--  2.0 unx     5463 b- defN 23-Apr-10 16:11 nucliadb/ingest/purge.py
--rw-r--r--  2.0 unx    17721 b- defN 23-Apr-10 16:11 nucliadb/ingest/serialize.py
--rw-r--r--  2.0 unx     3021 b- defN 23-Apr-10 16:11 nucliadb/ingest/settings.py
--rw-r--r--  2.0 unx     4255 b- defN 23-Apr-10 16:11 nucliadb/ingest/utils.py
--rw-r--r--  2.0 unx     1087 b- defN 23-Apr-10 16:11 nucliadb/ingest/consumer/__init__.py
--rw-r--r--  2.0 unx    16928 b- defN 23-Apr-10 16:11 nucliadb/ingest/consumer/pull.py
--rw-r--r--  2.0 unx     6425 b- defN 23-Apr-10 16:11 nucliadb/ingest/consumer/service.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/__init__.py
--rw-r--r--  2.0 unx    20415 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/base.py
--rw-r--r--  2.0 unx     6823 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/conversation.py
--rw-r--r--  2.0 unx     1223 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/date.py
--rw-r--r--  2.0 unx     1205 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/exceptions.py
--rw-r--r--  2.0 unx     5159 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/file.py
--rw-r--r--  2.0 unx     1523 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/generic.py
--rw-r--r--  2.0 unx     1235 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/keywordset.py
--rw-r--r--  2.0 unx     2250 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/layout.py
--rw-r--r--  2.0 unx     4084 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/link.py
--rw-r--r--  2.0 unx     1319 b- defN 23-Apr-10 16:11 nucliadb/ingest/fields/text.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/ingest/maindb/__init__.py
--rw-r--r--  2.0 unx     3088 b- defN 23-Apr-10 16:11 nucliadb/ingest/maindb/driver.py
--rw-r--r--  2.0 unx      877 b- defN 23-Apr-10 16:11 nucliadb/ingest/maindb/exceptions.py
--rw-r--r--  2.0 unx      980 b- defN 23-Apr-10 16:11 nucliadb/ingest/maindb/keys.py
--rw-r--r--  2.0 unx     7607 b- defN 23-Apr-10 16:11 nucliadb/ingest/maindb/local.py
--rw-r--r--  2.0 unx     6115 b- defN 23-Apr-10 16:11 nucliadb/ingest/maindb/pg.py
--rw-r--r--  2.0 unx     6807 b- defN 23-Apr-10 16:11 nucliadb/ingest/maindb/redis.py
--rw-r--r--  2.0 unx     6974 b- defN 23-Apr-10 16:11 nucliadb/ingest/maindb/tikv.py
--rw-r--r--  2.0 unx     3628 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/__init__.py
--rw-r--r--  2.0 unx     7137 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/abc.py
--rw-r--r--  2.0 unx    20650 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/brain.py
--rw-r--r--  2.0 unx    15071 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/entities.py
--rw-r--r--  2.0 unx     1362 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/exceptions.py
--rw-r--r--  2.0 unx    12586 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/grpc_node_binding.py
--rw-r--r--  2.0 unx     5009 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/grpc_node_dummy.py
--rw-r--r--  2.0 unx    21289 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/knowledgebox.py
--rw-r--r--  2.0 unx     1730 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/labels.py
--rw-r--r--  2.0 unx     4291 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/local_node.py
--rw-r--r--  2.0 unx     2864 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/local_shard.py
--rw-r--r--  2.0 unx    19962 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/node.py
--rw-r--r--  2.0 unx     4293 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/nodes_manager.py
--rw-r--r--  2.0 unx    26056 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/processor.py
--rw-r--r--  2.0 unx    49605 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/resource.py
--rw-r--r--  2.0 unx     5087 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/shard.py
--rw-r--r--  2.0 unx     1739 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/synonyms.py
--rw-r--r--  2.0 unx     3340 b- defN 23-Apr-10 16:11 nucliadb/ingest/orm/utils.py
--rw-r--r--  2.0 unx     2817 b- defN 23-Apr-10 16:11 nucliadb/ingest/service/__init__.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/ingest/service/exceptions.py
--rw-r--r--  2.0 unx    35999 b- defN 23-Apr-10 16:11 nucliadb/ingest/service/writer.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/ingest/tests/__init__.py
--rw-r--r--  2.0 unx     1096 b- defN 23-Apr-10 16:11 nucliadb/ingest/tests/conftest.py
--rw-r--r--  2.0 unx    24774 b- defN 23-Apr-10 16:11 nucliadb/ingest/tests/fixtures.py
--rw-r--r--  2.0 unx     7549 b- defN 23-Apr-10 16:11 nucliadb/ingest/tests/tikv.py
--rw-r--r--  2.0 unx    42967 b- defN 23-Apr-10 16:11 nucliadb/ingest/tests/vectors.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/models/__init__.py
--rw-r--r--  2.0 unx     1587 b- defN 23-Apr-10 16:11 nucliadb/models/responses.py
--rw-r--r--  2.0 unx      914 b- defN 23-Apr-10 16:11 nucliadb/one/__init__.py
--rw-r--r--  2.0 unx     3257 b- defN 23-Apr-10 16:11 nucliadb/one/app.py
--rw-r--r--  2.0 unx     2130 b- defN 23-Apr-10 16:11 nucliadb/one/lifecycle.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/one/tests/__init__.py
--rw-r--r--  2.0 unx     1164 b- defN 23-Apr-10 16:11 nucliadb/one/tests/conftest.py
--rw-r--r--  2.0 unx     3591 b- defN 23-Apr-10 16:11 nucliadb/one/tests/fixtures.py
--rw-r--r--  2.0 unx     2561 b- defN 23-Apr-10 16:11 nucliadb/one/tests/test_basic.py
--rw-r--r--  2.0 unx     2492 b- defN 23-Apr-10 16:11 nucliadb/one/tests/test_delete_field.py
--rw-r--r--  2.0 unx     6087 b- defN 23-Apr-10 16:11 nucliadb/one/tests/test_fieldmetadata.py
--rw-r--r--  2.0 unx     4594 b- defN 23-Apr-10 16:11 nucliadb/one/tests/test_services.py
--rw-r--r--  2.0 unx     4067 b- defN 23-Apr-10 16:11 nucliadb/one/tests/test_upload_download.py
--rw-r--r--  2.0 unx     1328 b- defN 23-Apr-10 16:11 nucliadb/reader/__init__.py
--rw-r--r--  2.0 unx     3603 b- defN 23-Apr-10 16:11 nucliadb/reader/app.py
--rw-r--r--  2.0 unx     1741 b- defN 23-Apr-10 16:11 nucliadb/reader/lifecycle.py
--rw-r--r--  2.0 unx     2186 b- defN 23-Apr-10 16:11 nucliadb/reader/openapi.py
--rw-r--r--  2.0 unx     1010 b- defN 23-Apr-10 16:11 nucliadb/reader/run.py
--rw-r--r--  2.0 unx      872 b- defN 23-Apr-10 16:11 nucliadb/reader/api/__init__.py
--rw-r--r--  2.0 unx     2433 b- defN 23-Apr-10 16:11 nucliadb/reader/api/models.py
--rw-r--r--  2.0 unx      995 b- defN 23-Apr-10 16:11 nucliadb/reader/api/v1/__init__.py
--rw-r--r--  2.0 unx     9671 b- defN 23-Apr-10 16:11 nucliadb/reader/api/v1/download.py
--rw-r--r--  2.0 unx     3570 b- defN 23-Apr-10 16:11 nucliadb/reader/api/v1/knowledgebox.py
--rw-r--r--  2.0 unx    10697 b- defN 23-Apr-10 16:11 nucliadb/reader/api/v1/resource.py
--rw-r--r--  2.0 unx     1011 b- defN 23-Apr-10 16:11 nucliadb/reader/api/v1/router.py
--rw-r--r--  2.0 unx    10552 b- defN 23-Apr-10 16:11 nucliadb/reader/api/v1/services.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/reader/tests/__init__.py
--rw-r--r--  2.0 unx     1101 b- defN 23-Apr-10 16:11 nucliadb/reader/tests/conftest.py
--rw-r--r--  2.0 unx     4564 b- defN 23-Apr-10 16:11 nucliadb/reader/tests/fixtures.py
--rw-r--r--  2.0 unx     2749 b- defN 23-Apr-10 16:11 nucliadb/reader/tests/test_list_resources.py
--rw-r--r--  2.0 unx     9139 b- defN 23-Apr-10 16:11 nucliadb/reader/tests/test_reader_file_download.py
--rw-r--r--  2.0 unx    11359 b- defN 23-Apr-10 16:11 nucliadb/reader/tests/test_reader_resource.py
--rw-r--r--  2.0 unx     6535 b- defN 23-Apr-10 16:11 nucliadb/reader/tests/test_reader_resource_field.py
--rw-r--r--  2.0 unx     1535 b- defN 23-Apr-10 16:11 nucliadb/search/__init__.py
--rw-r--r--  2.0 unx     4809 b- defN 23-Apr-10 16:11 nucliadb/search/app.py
--rw-r--r--  2.0 unx     1848 b- defN 23-Apr-10 16:11 nucliadb/search/chitchat.py
--rw-r--r--  2.0 unx     3087 b- defN 23-Apr-10 16:11 nucliadb/search/lifecycle.py
--rw-r--r--  2.0 unx     2206 b- defN 23-Apr-10 16:11 nucliadb/search/openapi.py
--rw-r--r--  2.0 unx     8240 b- defN 23-Apr-10 16:11 nucliadb/search/predict.py
--rw-r--r--  2.0 unx     1011 b- defN 23-Apr-10 16:11 nucliadb/search/run.py
--rw-r--r--  2.0 unx     1162 b- defN 23-Apr-10 16:11 nucliadb/search/settings.py
--rw-r--r--  2.0 unx     1238 b- defN 23-Apr-10 16:11 nucliadb/search/utilities.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/search/api/__init__.py
--rw-r--r--  2.0 unx     1077 b- defN 23-Apr-10 16:11 nucliadb/search/api/v1/__init__.py
--rw-r--r--  2.0 unx     7419 b- defN 23-Apr-10 16:11 nucliadb/search/api/v1/chat.py
--rw-r--r--  2.0 unx     1831 b- defN 23-Apr-10 16:11 nucliadb/search/api/v1/feedback.py
--rw-r--r--  2.0 unx     9831 b- defN 23-Apr-10 16:11 nucliadb/search/api/v1/find.py
--rw-r--r--  2.0 unx     6957 b- defN 23-Apr-10 16:11 nucliadb/search/api/v1/knowledgebox.py
--rw-r--r--  2.0 unx     4640 b- defN 23-Apr-10 16:11 nucliadb/search/api/v1/resource.py
--rw-r--r--  2.0 unx      980 b- defN 23-Apr-10 16:11 nucliadb/search/api/v1/router.py
--rw-r--r--  2.0 unx    11574 b- defN 23-Apr-10 16:11 nucliadb/search/api/v1/search.py
--rw-r--r--  2.0 unx     4231 b- defN 23-Apr-10 16:11 nucliadb/search/api/v1/suggest.py
--rw-r--r--  2.0 unx      833 b- defN 23-Apr-10 16:11 nucliadb/search/requesters/__init__.py
--rw-r--r--  2.0 unx     5892 b- defN 23-Apr-10 16:11 nucliadb/search/requesters/utils.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/search/search/__init__.py
--rw-r--r--  2.0 unx    11833 b- defN 23-Apr-10 16:11 nucliadb/search/search/fetch.py
--rw-r--r--  2.0 unx    14238 b- defN 23-Apr-10 16:11 nucliadb/search/search/find_merge.py
--rw-r--r--  2.0 unx    18361 b- defN 23-Apr-10 16:11 nucliadb/search/search/merge.py
--rw-r--r--  2.0 unx      947 b- defN 23-Apr-10 16:11 nucliadb/search/search/metrics.py
--rw-r--r--  2.0 unx     9896 b- defN 23-Apr-10 16:11 nucliadb/search/search/query.py
--rw-r--r--  2.0 unx     2647 b- defN 23-Apr-10 16:11 nucliadb/search/search/shards.py
--rw-r--r--  2.0 unx     2055 b- defN 23-Apr-10 16:11 nucliadb/search/search/synonyms.py
--rw-r--r--  2.0 unx     2479 b- defN 23-Apr-10 16:11 nucliadb/search/search/utils.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/search/tests/__init__.py
--rw-r--r--  2.0 unx     1172 b- defN 23-Apr-10 16:11 nucliadb/search/tests/conftest.py
--rw-r--r--  2.0 unx     7846 b- defN 23-Apr-10 16:11 nucliadb/search/tests/fixtures.py
--rw-r--r--  2.0 unx    16225 b- defN 23-Apr-10 16:11 nucliadb/search/tests/node.py
--rw-r--r--  2.0 unx     2285 b- defN 23-Apr-10 16:11 nucliadb/static/favicon.ico
--rw-r--r--  2.0 unx     3833 b- defN 23-Apr-10 16:11 nucliadb/static/index.html
--rw-r--r--  2.0 unx     2639 b- defN 23-Apr-10 16:11 nucliadb/static/logo.svg
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/tests/__init__.py
--rw-r--r--  2.0 unx     1000 b- defN 23-Apr-10 16:11 nucliadb/tests/conftest.py
--rw-r--r--  2.0 unx    11528 b- defN 23-Apr-10 16:11 nucliadb/tests/fixtures.py
--rw-r--r--  2.0 unx     7370 b- defN 23-Apr-10 16:11 nucliadb/tests/test_advanced_search.py
--rw-r--r--  2.0 unx    13937 b- defN 23-Apr-10 16:11 nucliadb/tests/test_api.py
--rw-r--r--  2.0 unx     2052 b- defN 23-Apr-10 16:11 nucliadb/tests/test_counters.py
--rw-r--r--  2.0 unx    10703 b- defN 23-Apr-10 16:11 nucliadb/tests/test_entities.py
--rw-r--r--  2.0 unx    13274 b- defN 23-Apr-10 16:11 nucliadb/tests/test_entities_deprecated.py
--rw-r--r--  2.0 unx     3654 b- defN 23-Apr-10 16:11 nucliadb/tests/test_field_external_file.py
--rw-r--r--  2.0 unx     1487 b- defN 23-Apr-10 16:11 nucliadb/tests/test_field_ids.py
--rw-r--r--  2.0 unx     1524 b- defN 23-Apr-10 16:11 nucliadb/tests/test_kb_slugs.py
--rw-r--r--  2.0 unx    11431 b- defN 23-Apr-10 16:11 nucliadb/tests/test_labels.py
--rw-r--r--  2.0 unx     6071 b- defN 23-Apr-10 16:11 nucliadb/tests/test_reindex.py
--rw-r--r--  2.0 unx     6586 b- defN 23-Apr-10 16:11 nucliadb/tests/test_relations.py
--rw-r--r--  2.0 unx     7072 b- defN 23-Apr-10 16:11 nucliadb/tests/test_resources.py
--rw-r--r--  2.0 unx     1220 b- defN 23-Apr-10 16:11 nucliadb/tests/test_run.py
--rw-r--r--  2.0 unx    41877 b- defN 23-Apr-10 16:11 nucliadb/tests/test_search.py
--rw-r--r--  2.0 unx     9708 b- defN 23-Apr-10 16:11 nucliadb/tests/test_search_sorting.py
--rw-r--r--  2.0 unx     8918 b- defN 23-Apr-10 16:11 nucliadb/tests/test_suggest.py
--rw-r--r--  2.0 unx     6819 b- defN 23-Apr-10 16:11 nucliadb/tests/test_synonyms.py
--rw-r--r--  2.0 unx     2637 b- defN 23-Apr-10 16:11 nucliadb/tests/test_tokens.py
--rw-r--r--  2.0 unx     2096 b- defN 23-Apr-10 16:11 nucliadb/tests/test_upload.py
--rw-r--r--  2.0 unx     2585 b- defN 23-Apr-10 16:11 nucliadb/tests/test_usermetadata.py
--rw-r--r--  2.0 unx     8758 b- defN 23-Apr-10 16:11 nucliadb/tests/test_vectorset.py
--rw-r--r--  2.0 unx      919 b- defN 23-Apr-10 16:11 nucliadb/tests/knowledgeboxes/__init__.py
--rw-r--r--  2.0 unx     7049 b- defN 23-Apr-10 16:11 nucliadb/tests/knowledgeboxes/philosophy_books.py
--rw-r--r--  2.0 unx     3131 b- defN 23-Apr-10 16:11 nucliadb/tests/knowledgeboxes/ten_dummy_resources.py
--rw-r--r--  2.0 unx     2492 b- defN 23-Apr-10 16:11 nucliadb/tests/utils/__init__.py
--rw-r--r--  2.0 unx     2533 b- defN 23-Apr-10 16:11 nucliadb/tests/utils/entities.py
--rw-r--r--  2.0 unx     1325 b- defN 23-Apr-10 16:11 nucliadb/train/__init__.py
--rw-r--r--  2.0 unx     3587 b- defN 23-Apr-10 16:11 nucliadb/train/app.py
--rw-r--r--  2.0 unx     1846 b- defN 23-Apr-10 16:11 nucliadb/train/chitchat.py
--rw-r--r--  2.0 unx     3836 b- defN 23-Apr-10 16:11 nucliadb/train/generator.py
--rw-r--r--  2.0 unx     2012 b- defN 23-Apr-10 16:11 nucliadb/train/lifecycle.py
--rw-r--r--  2.0 unx     1198 b- defN 23-Apr-10 16:11 nucliadb/train/models.py
--rw-r--r--  2.0 unx     8043 b- defN 23-Apr-10 16:11 nucliadb/train/nodes.py
--rw-r--r--  2.0 unx     1009 b- defN 23-Apr-10 16:11 nucliadb/train/run.py
--rw-r--r--  2.0 unx     5755 b- defN 23-Apr-10 16:11 nucliadb/train/servicer.py
--rw-r--r--  2.0 unx     1612 b- defN 23-Apr-10 16:11 nucliadb/train/settings.py
--rw-r--r--  2.0 unx     3600 b- defN 23-Apr-10 16:11 nucliadb/train/upload.py
--rw-r--r--  2.0 unx     6531 b- defN 23-Apr-10 16:11 nucliadb/train/uploader.py
--rw-r--r--  2.0 unx     3077 b- defN 23-Apr-10 16:11 nucliadb/train/utils.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/train/api/__init__.py
--rw-r--r--  2.0 unx      958 b- defN 23-Apr-10 16:11 nucliadb/train/api/models.py
--rw-r--r--  2.0 unx     1479 b- defN 23-Apr-10 16:11 nucliadb/train/api/utils.py
--rw-r--r--  2.0 unx      928 b- defN 23-Apr-10 16:11 nucliadb/train/api/v1/__init__.py
--rw-r--r--  2.0 unx     2066 b- defN 23-Apr-10 16:11 nucliadb/train/api/v1/check.py
--rw-r--r--  2.0 unx      910 b- defN 23-Apr-10 16:11 nucliadb/train/api/v1/router.py
--rw-r--r--  2.0 unx     1905 b- defN 23-Apr-10 16:11 nucliadb/train/api/v1/shards.py
--rw-r--r--  2.0 unx     1825 b- defN 23-Apr-10 16:11 nucliadb/train/api/v1/trainset.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/train/generators/__init__.py
--rw-r--r--  2.0 unx     3289 b- defN 23-Apr-10 16:11 nucliadb/train/generators/field_classifier.py
--rw-r--r--  2.0 unx     3594 b- defN 23-Apr-10 16:11 nucliadb/train/generators/paragraph_classifier.py
--rw-r--r--  2.0 unx     4767 b- defN 23-Apr-10 16:11 nucliadb/train/generators/sentence_classifier.py
--rw-r--r--  2.0 unx    10176 b- defN 23-Apr-10 16:11 nucliadb/train/generators/token_classifier.py
--rw-r--r--  2.0 unx     2519 b- defN 23-Apr-10 16:11 nucliadb/train/generators/utils.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/train/tests/__init__.py
--rw-r--r--  2.0 unx     1088 b- defN 23-Apr-10 16:11 nucliadb/train/tests/conftest.py
--rw-r--r--  2.0 unx     8975 b- defN 23-Apr-10 16:11 nucliadb/train/tests/fixtures.py
--rw-r--r--  2.0 unx     8132 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_field_classification.py
--rw-r--r--  2.0 unx     2729 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_get_entities.py
--rw-r--r--  2.0 unx     1660 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_get_info.py
--rw-r--r--  2.0 unx     1382 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_get_ontology.py
--rw-r--r--  2.0 unx     2201 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_get_ontology_count.py
--rw-r--r--  2.0 unx     1416 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_list_fields.py
--rw-r--r--  2.0 unx     2944 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_list_paragraphs.py
--rw-r--r--  2.0 unx     1423 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_list_resources.py
--rw-r--r--  2.0 unx     2863 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_list_sentences.py
--rw-r--r--  2.0 unx     8129 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_paragraph_classification.py
--rw-r--r--  2.0 unx     8349 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_sentence_classification.py
--rw-r--r--  2.0 unx    10122 b- defN 23-Apr-10 16:11 nucliadb/train/tests/test_token_classification.py
--rw-r--r--  2.0 unx     1328 b- defN 23-Apr-10 16:11 nucliadb/writer/__init__.py
--rw-r--r--  2.0 unx     3578 b- defN 23-Apr-10 16:11 nucliadb/writer/app.py
--rw-r--r--  2.0 unx      972 b- defN 23-Apr-10 16:11 nucliadb/writer/exceptions.py
--rw-r--r--  2.0 unx     3865 b- defN 23-Apr-10 16:11 nucliadb/writer/lifecycle.py
--rw-r--r--  2.0 unx     2186 b- defN 23-Apr-10 16:11 nucliadb/writer/openapi.py
--rw-r--r--  2.0 unx     1011 b- defN 23-Apr-10 16:11 nucliadb/writer/run.py
--rw-r--r--  2.0 unx     1062 b- defN 23-Apr-10 16:11 nucliadb/writer/settings.py
--rw-r--r--  2.0 unx     1036 b- defN 23-Apr-10 16:11 nucliadb/writer/utilities.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/writer/api/__init__.py
--rw-r--r--  2.0 unx     1021 b- defN 23-Apr-10 16:11 nucliadb/writer/api/v1/__init__.py
--rw-r--r--  2.0 unx    22265 b- defN 23-Apr-10 16:11 nucliadb/writer/api/v1/field.py
--rw-r--r--  2.0 unx     5395 b- defN 23-Apr-10 16:11 nucliadb/writer/api/v1/knowledgebox.py
--rw-r--r--  2.0 unx    15213 b- defN 23-Apr-10 16:11 nucliadb/writer/api/v1/resource.py
--rw-r--r--  2.0 unx     1034 b- defN 23-Apr-10 16:11 nucliadb/writer/api/v1/router.py
--rw-r--r--  2.0 unx    14132 b- defN 23-Apr-10 16:11 nucliadb/writer/api/v1/services.py
--rw-r--r--  2.0 unx    25454 b- defN 23-Apr-10 16:11 nucliadb/writer/api/v1/upload.py
--rw-r--r--  2.0 unx     1618 b- defN 23-Apr-10 16:11 nucliadb/writer/layouts/__init__.py
--rw-r--r--  2.0 unx     2115 b- defN 23-Apr-10 16:11 nucliadb/writer/layouts/v1.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/writer/resource/__init__.py
--rw-r--r--  2.0 unx     1425 b- defN 23-Apr-10 16:11 nucliadb/writer/resource/audit.py
--rw-r--r--  2.0 unx     8554 b- defN 23-Apr-10 16:11 nucliadb/writer/resource/basic.py
--rw-r--r--  2.0 unx    15695 b- defN 23-Apr-10 16:11 nucliadb/writer/resource/field.py
--rw-r--r--  2.0 unx     1708 b- defN 23-Apr-10 16:11 nucliadb/writer/resource/origin.py
--rw-r--r--  2.0 unx     1151 b- defN 23-Apr-10 16:11 nucliadb/writer/resource/slug.py
--rw-r--r--  2.0 unx     4991 b- defN 23-Apr-10 16:11 nucliadb/writer/resource/vectors.py
--rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/__init__.py
--rw-r--r--  2.0 unx     1144 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/conftest.py
--rw-r--r--  2.0 unx     4275 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/fixtures.py
--rw-r--r--  2.0 unx    16585 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/test_fields.py
--rw-r--r--  2.0 unx    21581 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/test_files.py
--rw-r--r--  2.0 unx     1932 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/test_knowledgebox.py
--rw-r--r--  2.0 unx     4747 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/test_reprocess_file_field.py
--rw-r--r--  2.0 unx    19059 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/test_resources.py
--rw-r--r--  2.0 unx     5345 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/test_service.py
--rw-r--r--  2.0 unx     3596 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/test_tus.py
--rw-r--r--  2.0 unx     2028 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/tus.py
--rw-r--r--  2.0 unx     1287 b- defN 23-Apr-10 16:11 nucliadb/writer/tests/utils.py
--rw-r--r--  2.0 unx     4095 b- defN 23-Apr-10 16:11 nucliadb/writer/tus/__init__.py
--rw-r--r--  2.0 unx     4396 b- defN 23-Apr-10 16:11 nucliadb/writer/tus/dm.py
--rw-r--r--  2.0 unx     2186 b- defN 23-Apr-10 16:11 nucliadb/writer/tus/exceptions.py
--rw-r--r--  2.0 unx    13818 b- defN 23-Apr-10 16:11 nucliadb/writer/tus/gcs.py
--rw-r--r--  2.0 unx     5811 b- defN 23-Apr-10 16:11 nucliadb/writer/tus/local.py
--rw-r--r--  2.0 unx     8571 b- defN 23-Apr-10 16:11 nucliadb/writer/tus/s3.py
--rw-r--r--  2.0 unx     4682 b- defN 23-Apr-10 16:11 nucliadb/writer/tus/storage.py
--rw-r--r--  2.0 unx     2580 b- defN 23-Apr-10 16:11 nucliadb/writer/tus/utils.py
--rw-r--r--  2.0 unx     3143 b- defN 23-Apr-10 16:13 nucliadb-2.7.0.post145.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-10 16:13 nucliadb-2.7.0.post145.dist-info/WHEEL
--rw-r--r--  2.0 unx      735 b- defN 23-Apr-10 16:13 nucliadb-2.7.0.post145.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        9 b- defN 23-Apr-10 16:13 nucliadb-2.7.0.post145.dist-info/top_level.txt
--rw-r--r--  2.0 unx        1 b- defN 23-Apr-10 16:13 nucliadb-2.7.0.post145.dist-info/zip-safe
--rw-rw-r--  2.0 unx    22910 b- defN 23-Apr-10 16:13 nucliadb-2.7.0.post145.dist-info/RECORD
-258 files, 1439470 bytes uncompressed, 410397 bytes compressed:  71.5%
+Zip file size: 447677 bytes, number of entries: 259
+-rw-r--r--  2.0 unx      891 b- defN 23-Apr-10 17:22 nucliadb/__init__.py
+-rw-r--r--  2.0 unx     1027 b- defN 23-Apr-10 17:22 nucliadb/app.py
+-rw-r--r--  2.0 unx     4556 b- defN 23-Apr-10 17:22 nucliadb/config.py
+-rw-r--r--  2.0 unx     2785 b- defN 23-Apr-10 17:22 nucliadb/logging.py
+-rw-r--r--  2.0 unx     1393 b- defN 23-Apr-10 17:22 nucliadb/purge.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-10 17:22 nucliadb/py.typed
+-rw-r--r--  2.0 unx     3268 b- defN 23-Apr-10 17:22 nucliadb/run.py
+-rw-r--r--  2.0 unx     1945 b- defN 23-Apr-10 17:22 nucliadb/settings.py
+-rw-r--r--  2.0 unx     1011 b- defN 23-Apr-10 17:22 nucliadb/ingest/__init__.py
+-rw-r--r--  2.0 unx     6354 b- defN 23-Apr-10 17:22 nucliadb/ingest/app.py
+-rw-r--r--  2.0 unx      995 b- defN 23-Apr-10 17:22 nucliadb/ingest/cache.py
+-rw-r--r--  2.0 unx     6874 b- defN 23-Apr-10 17:22 nucliadb/ingest/chitchat.py
+-rw-r--r--  2.0 unx     2425 b- defN 23-Apr-10 17:22 nucliadb/ingest/partitions.py
+-rw-r--r--  2.0 unx    14757 b- defN 23-Apr-10 17:22 nucliadb/ingest/processing.py
+-rw-r--r--  2.0 unx     5463 b- defN 23-Apr-10 17:22 nucliadb/ingest/purge.py
+-rw-r--r--  2.0 unx    17721 b- defN 23-Apr-10 17:22 nucliadb/ingest/serialize.py
+-rw-r--r--  2.0 unx     3021 b- defN 23-Apr-10 17:22 nucliadb/ingest/settings.py
+-rw-r--r--  2.0 unx     2531 b- defN 23-Apr-10 17:22 nucliadb/ingest/txn_utils.py
+-rw-r--r--  2.0 unx     4255 b- defN 23-Apr-10 17:22 nucliadb/ingest/utils.py
+-rw-r--r--  2.0 unx     1087 b- defN 23-Apr-10 17:22 nucliadb/ingest/consumer/__init__.py
+-rw-r--r--  2.0 unx    16944 b- defN 23-Apr-10 17:22 nucliadb/ingest/consumer/pull.py
+-rw-r--r--  2.0 unx     6425 b- defN 23-Apr-10 17:22 nucliadb/ingest/consumer/service.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/__init__.py
+-rw-r--r--  2.0 unx    20415 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/base.py
+-rw-r--r--  2.0 unx     6823 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/conversation.py
+-rw-r--r--  2.0 unx     1223 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/date.py
+-rw-r--r--  2.0 unx     1205 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/exceptions.py
+-rw-r--r--  2.0 unx     5159 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/file.py
+-rw-r--r--  2.0 unx     1523 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/generic.py
+-rw-r--r--  2.0 unx     1235 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/keywordset.py
+-rw-r--r--  2.0 unx     2250 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/layout.py
+-rw-r--r--  2.0 unx     4084 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/link.py
+-rw-r--r--  2.0 unx     1319 b- defN 23-Apr-10 17:22 nucliadb/ingest/fields/text.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/ingest/maindb/__init__.py
+-rw-r--r--  2.0 unx     3088 b- defN 23-Apr-10 17:22 nucliadb/ingest/maindb/driver.py
+-rw-r--r--  2.0 unx      877 b- defN 23-Apr-10 17:22 nucliadb/ingest/maindb/exceptions.py
+-rw-r--r--  2.0 unx      980 b- defN 23-Apr-10 17:22 nucliadb/ingest/maindb/keys.py
+-rw-r--r--  2.0 unx     7607 b- defN 23-Apr-10 17:22 nucliadb/ingest/maindb/local.py
+-rw-r--r--  2.0 unx     6115 b- defN 23-Apr-10 17:22 nucliadb/ingest/maindb/pg.py
+-rw-r--r--  2.0 unx     6807 b- defN 23-Apr-10 17:22 nucliadb/ingest/maindb/redis.py
+-rw-r--r--  2.0 unx     7020 b- defN 23-Apr-10 17:22 nucliadb/ingest/maindb/tikv.py
+-rw-r--r--  2.0 unx     3628 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/__init__.py
+-rw-r--r--  2.0 unx     7137 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/abc.py
+-rw-r--r--  2.0 unx    20650 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/brain.py
+-rw-r--r--  2.0 unx    15071 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/entities.py
+-rw-r--r--  2.0 unx     1362 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/exceptions.py
+-rw-r--r--  2.0 unx    12586 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/grpc_node_binding.py
+-rw-r--r--  2.0 unx     5009 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/grpc_node_dummy.py
+-rw-r--r--  2.0 unx    21289 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/knowledgebox.py
+-rw-r--r--  2.0 unx     1730 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/labels.py
+-rw-r--r--  2.0 unx     4291 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/local_node.py
+-rw-r--r--  2.0 unx     2864 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/local_shard.py
+-rw-r--r--  2.0 unx    19962 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/node.py
+-rw-r--r--  2.0 unx     4312 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/nodes_manager.py
+-rw-r--r--  2.0 unx    26056 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/processor.py
+-rw-r--r--  2.0 unx    49605 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/resource.py
+-rw-r--r--  2.0 unx     5087 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/shard.py
+-rw-r--r--  2.0 unx     1739 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/synonyms.py
+-rw-r--r--  2.0 unx     3340 b- defN 23-Apr-10 17:22 nucliadb/ingest/orm/utils.py
+-rw-r--r--  2.0 unx     2817 b- defN 23-Apr-10 17:22 nucliadb/ingest/service/__init__.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/ingest/service/exceptions.py
+-rw-r--r--  2.0 unx    36015 b- defN 23-Apr-10 17:22 nucliadb/ingest/service/writer.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/ingest/tests/__init__.py
+-rw-r--r--  2.0 unx     1096 b- defN 23-Apr-10 17:22 nucliadb/ingest/tests/conftest.py
+-rw-r--r--  2.0 unx    24774 b- defN 23-Apr-10 17:22 nucliadb/ingest/tests/fixtures.py
+-rw-r--r--  2.0 unx     7549 b- defN 23-Apr-10 17:22 nucliadb/ingest/tests/tikv.py
+-rw-r--r--  2.0 unx    42967 b- defN 23-Apr-10 17:22 nucliadb/ingest/tests/vectors.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/models/__init__.py
+-rw-r--r--  2.0 unx     1587 b- defN 23-Apr-10 17:22 nucliadb/models/responses.py
+-rw-r--r--  2.0 unx      914 b- defN 23-Apr-10 17:22 nucliadb/one/__init__.py
+-rw-r--r--  2.0 unx     3257 b- defN 23-Apr-10 17:22 nucliadb/one/app.py
+-rw-r--r--  2.0 unx     2130 b- defN 23-Apr-10 17:22 nucliadb/one/lifecycle.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/one/tests/__init__.py
+-rw-r--r--  2.0 unx     1164 b- defN 23-Apr-10 17:22 nucliadb/one/tests/conftest.py
+-rw-r--r--  2.0 unx     3591 b- defN 23-Apr-10 17:22 nucliadb/one/tests/fixtures.py
+-rw-r--r--  2.0 unx     2561 b- defN 23-Apr-10 17:22 nucliadb/one/tests/test_basic.py
+-rw-r--r--  2.0 unx     2492 b- defN 23-Apr-10 17:22 nucliadb/one/tests/test_delete_field.py
+-rw-r--r--  2.0 unx     6087 b- defN 23-Apr-10 17:22 nucliadb/one/tests/test_fieldmetadata.py
+-rw-r--r--  2.0 unx     4594 b- defN 23-Apr-10 17:22 nucliadb/one/tests/test_services.py
+-rw-r--r--  2.0 unx     4067 b- defN 23-Apr-10 17:22 nucliadb/one/tests/test_upload_download.py
+-rw-r--r--  2.0 unx     1328 b- defN 23-Apr-10 17:22 nucliadb/reader/__init__.py
+-rw-r--r--  2.0 unx     3603 b- defN 23-Apr-10 17:22 nucliadb/reader/app.py
+-rw-r--r--  2.0 unx     1741 b- defN 23-Apr-10 17:22 nucliadb/reader/lifecycle.py
+-rw-r--r--  2.0 unx     2186 b- defN 23-Apr-10 17:22 nucliadb/reader/openapi.py
+-rw-r--r--  2.0 unx     1010 b- defN 23-Apr-10 17:22 nucliadb/reader/run.py
+-rw-r--r--  2.0 unx      872 b- defN 23-Apr-10 17:22 nucliadb/reader/api/__init__.py
+-rw-r--r--  2.0 unx     2433 b- defN 23-Apr-10 17:22 nucliadb/reader/api/models.py
+-rw-r--r--  2.0 unx      995 b- defN 23-Apr-10 17:22 nucliadb/reader/api/v1/__init__.py
+-rw-r--r--  2.0 unx     9671 b- defN 23-Apr-10 17:22 nucliadb/reader/api/v1/download.py
+-rw-r--r--  2.0 unx     3570 b- defN 23-Apr-10 17:22 nucliadb/reader/api/v1/knowledgebox.py
+-rw-r--r--  2.0 unx    10697 b- defN 23-Apr-10 17:22 nucliadb/reader/api/v1/resource.py
+-rw-r--r--  2.0 unx     1011 b- defN 23-Apr-10 17:22 nucliadb/reader/api/v1/router.py
+-rw-r--r--  2.0 unx    10552 b- defN 23-Apr-10 17:22 nucliadb/reader/api/v1/services.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/reader/tests/__init__.py
+-rw-r--r--  2.0 unx     1101 b- defN 23-Apr-10 17:22 nucliadb/reader/tests/conftest.py
+-rw-r--r--  2.0 unx     4564 b- defN 23-Apr-10 17:22 nucliadb/reader/tests/fixtures.py
+-rw-r--r--  2.0 unx     2749 b- defN 23-Apr-10 17:22 nucliadb/reader/tests/test_list_resources.py
+-rw-r--r--  2.0 unx     9139 b- defN 23-Apr-10 17:22 nucliadb/reader/tests/test_reader_file_download.py
+-rw-r--r--  2.0 unx    11359 b- defN 23-Apr-10 17:22 nucliadb/reader/tests/test_reader_resource.py
+-rw-r--r--  2.0 unx     6535 b- defN 23-Apr-10 17:22 nucliadb/reader/tests/test_reader_resource_field.py
+-rw-r--r--  2.0 unx     1535 b- defN 23-Apr-10 17:22 nucliadb/search/__init__.py
+-rw-r--r--  2.0 unx     4809 b- defN 23-Apr-10 17:22 nucliadb/search/app.py
+-rw-r--r--  2.0 unx     1848 b- defN 23-Apr-10 17:22 nucliadb/search/chitchat.py
+-rw-r--r--  2.0 unx     3087 b- defN 23-Apr-10 17:22 nucliadb/search/lifecycle.py
+-rw-r--r--  2.0 unx     2206 b- defN 23-Apr-10 17:22 nucliadb/search/openapi.py
+-rw-r--r--  2.0 unx     8240 b- defN 23-Apr-10 17:22 nucliadb/search/predict.py
+-rw-r--r--  2.0 unx     1011 b- defN 23-Apr-10 17:22 nucliadb/search/run.py
+-rw-r--r--  2.0 unx     1162 b- defN 23-Apr-10 17:22 nucliadb/search/settings.py
+-rw-r--r--  2.0 unx     1238 b- defN 23-Apr-10 17:22 nucliadb/search/utilities.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/search/api/__init__.py
+-rw-r--r--  2.0 unx     1077 b- defN 23-Apr-10 17:22 nucliadb/search/api/v1/__init__.py
+-rw-r--r--  2.0 unx     7419 b- defN 23-Apr-10 17:22 nucliadb/search/api/v1/chat.py
+-rw-r--r--  2.0 unx     1831 b- defN 23-Apr-10 17:22 nucliadb/search/api/v1/feedback.py
+-rw-r--r--  2.0 unx     9648 b- defN 23-Apr-10 17:22 nucliadb/search/api/v1/find.py
+-rw-r--r--  2.0 unx     6938 b- defN 23-Apr-10 17:22 nucliadb/search/api/v1/knowledgebox.py
+-rw-r--r--  2.0 unx     4637 b- defN 23-Apr-10 17:22 nucliadb/search/api/v1/resource.py
+-rw-r--r--  2.0 unx      980 b- defN 23-Apr-10 17:22 nucliadb/search/api/v1/router.py
+-rw-r--r--  2.0 unx    11555 b- defN 23-Apr-10 17:22 nucliadb/search/api/v1/search.py
+-rw-r--r--  2.0 unx     4212 b- defN 23-Apr-10 17:22 nucliadb/search/api/v1/suggest.py
+-rw-r--r--  2.0 unx      833 b- defN 23-Apr-10 17:22 nucliadb/search/requesters/__init__.py
+-rw-r--r--  2.0 unx     5873 b- defN 23-Apr-10 17:22 nucliadb/search/requesters/utils.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/search/search/__init__.py
+-rw-r--r--  2.0 unx    11301 b- defN 23-Apr-10 17:22 nucliadb/search/search/fetch.py
+-rw-r--r--  2.0 unx    14538 b- defN 23-Apr-10 17:22 nucliadb/search/search/find_merge.py
+-rw-r--r--  2.0 unx    18361 b- defN 23-Apr-10 17:22 nucliadb/search/search/merge.py
+-rw-r--r--  2.0 unx      947 b- defN 23-Apr-10 17:22 nucliadb/search/search/metrics.py
+-rw-r--r--  2.0 unx     9896 b- defN 23-Apr-10 17:22 nucliadb/search/search/query.py
+-rw-r--r--  2.0 unx     2647 b- defN 23-Apr-10 17:22 nucliadb/search/search/shards.py
+-rw-r--r--  2.0 unx     2055 b- defN 23-Apr-10 17:22 nucliadb/search/search/synonyms.py
+-rw-r--r--  2.0 unx     2479 b- defN 23-Apr-10 17:22 nucliadb/search/search/utils.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/search/tests/__init__.py
+-rw-r--r--  2.0 unx     1172 b- defN 23-Apr-10 17:22 nucliadb/search/tests/conftest.py
+-rw-r--r--  2.0 unx     7846 b- defN 23-Apr-10 17:22 nucliadb/search/tests/fixtures.py
+-rw-r--r--  2.0 unx    16225 b- defN 23-Apr-10 17:22 nucliadb/search/tests/node.py
+-rw-r--r--  2.0 unx     2285 b- defN 23-Apr-10 17:22 nucliadb/static/favicon.ico
+-rw-r--r--  2.0 unx     3833 b- defN 23-Apr-10 17:22 nucliadb/static/index.html
+-rw-r--r--  2.0 unx     2639 b- defN 23-Apr-10 17:22 nucliadb/static/logo.svg
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/tests/__init__.py
+-rw-r--r--  2.0 unx     1000 b- defN 23-Apr-10 17:22 nucliadb/tests/conftest.py
+-rw-r--r--  2.0 unx    11528 b- defN 23-Apr-10 17:22 nucliadb/tests/fixtures.py
+-rw-r--r--  2.0 unx     7370 b- defN 23-Apr-10 17:22 nucliadb/tests/test_advanced_search.py
+-rw-r--r--  2.0 unx    13937 b- defN 23-Apr-10 17:22 nucliadb/tests/test_api.py
+-rw-r--r--  2.0 unx     2052 b- defN 23-Apr-10 17:22 nucliadb/tests/test_counters.py
+-rw-r--r--  2.0 unx    10703 b- defN 23-Apr-10 17:22 nucliadb/tests/test_entities.py
+-rw-r--r--  2.0 unx    13274 b- defN 23-Apr-10 17:22 nucliadb/tests/test_entities_deprecated.py
+-rw-r--r--  2.0 unx     3654 b- defN 23-Apr-10 17:22 nucliadb/tests/test_field_external_file.py
+-rw-r--r--  2.0 unx     1487 b- defN 23-Apr-10 17:22 nucliadb/tests/test_field_ids.py
+-rw-r--r--  2.0 unx     1524 b- defN 23-Apr-10 17:22 nucliadb/tests/test_kb_slugs.py
+-rw-r--r--  2.0 unx    11431 b- defN 23-Apr-10 17:22 nucliadb/tests/test_labels.py
+-rw-r--r--  2.0 unx     6071 b- defN 23-Apr-10 17:22 nucliadb/tests/test_reindex.py
+-rw-r--r--  2.0 unx     6586 b- defN 23-Apr-10 17:22 nucliadb/tests/test_relations.py
+-rw-r--r--  2.0 unx     7072 b- defN 23-Apr-10 17:22 nucliadb/tests/test_resources.py
+-rw-r--r--  2.0 unx     1220 b- defN 23-Apr-10 17:22 nucliadb/tests/test_run.py
+-rw-r--r--  2.0 unx    41877 b- defN 23-Apr-10 17:22 nucliadb/tests/test_search.py
+-rw-r--r--  2.0 unx     9708 b- defN 23-Apr-10 17:22 nucliadb/tests/test_search_sorting.py
+-rw-r--r--  2.0 unx     8918 b- defN 23-Apr-10 17:22 nucliadb/tests/test_suggest.py
+-rw-r--r--  2.0 unx     6819 b- defN 23-Apr-10 17:22 nucliadb/tests/test_synonyms.py
+-rw-r--r--  2.0 unx     2637 b- defN 23-Apr-10 17:22 nucliadb/tests/test_tokens.py
+-rw-r--r--  2.0 unx     2096 b- defN 23-Apr-10 17:22 nucliadb/tests/test_upload.py
+-rw-r--r--  2.0 unx     2585 b- defN 23-Apr-10 17:22 nucliadb/tests/test_usermetadata.py
+-rw-r--r--  2.0 unx     8758 b- defN 23-Apr-10 17:22 nucliadb/tests/test_vectorset.py
+-rw-r--r--  2.0 unx      919 b- defN 23-Apr-10 17:22 nucliadb/tests/knowledgeboxes/__init__.py
+-rw-r--r--  2.0 unx     7049 b- defN 23-Apr-10 17:22 nucliadb/tests/knowledgeboxes/philosophy_books.py
+-rw-r--r--  2.0 unx     3131 b- defN 23-Apr-10 17:22 nucliadb/tests/knowledgeboxes/ten_dummy_resources.py
+-rw-r--r--  2.0 unx     2492 b- defN 23-Apr-10 17:22 nucliadb/tests/utils/__init__.py
+-rw-r--r--  2.0 unx     2533 b- defN 23-Apr-10 17:22 nucliadb/tests/utils/entities.py
+-rw-r--r--  2.0 unx     1325 b- defN 23-Apr-10 17:22 nucliadb/train/__init__.py
+-rw-r--r--  2.0 unx     3587 b- defN 23-Apr-10 17:22 nucliadb/train/app.py
+-rw-r--r--  2.0 unx     1846 b- defN 23-Apr-10 17:22 nucliadb/train/chitchat.py
+-rw-r--r--  2.0 unx     3836 b- defN 23-Apr-10 17:22 nucliadb/train/generator.py
+-rw-r--r--  2.0 unx     2012 b- defN 23-Apr-10 17:22 nucliadb/train/lifecycle.py
+-rw-r--r--  2.0 unx     1198 b- defN 23-Apr-10 17:22 nucliadb/train/models.py
+-rw-r--r--  2.0 unx     8043 b- defN 23-Apr-10 17:22 nucliadb/train/nodes.py
+-rw-r--r--  2.0 unx     1009 b- defN 23-Apr-10 17:22 nucliadb/train/run.py
+-rw-r--r--  2.0 unx     5755 b- defN 23-Apr-10 17:22 nucliadb/train/servicer.py
+-rw-r--r--  2.0 unx     1612 b- defN 23-Apr-10 17:22 nucliadb/train/settings.py
+-rw-r--r--  2.0 unx     3600 b- defN 23-Apr-10 17:22 nucliadb/train/upload.py
+-rw-r--r--  2.0 unx     6531 b- defN 23-Apr-10 17:22 nucliadb/train/uploader.py
+-rw-r--r--  2.0 unx     3077 b- defN 23-Apr-10 17:22 nucliadb/train/utils.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/train/api/__init__.py
+-rw-r--r--  2.0 unx      958 b- defN 23-Apr-10 17:22 nucliadb/train/api/models.py
+-rw-r--r--  2.0 unx     1479 b- defN 23-Apr-10 17:22 nucliadb/train/api/utils.py
+-rw-r--r--  2.0 unx      928 b- defN 23-Apr-10 17:22 nucliadb/train/api/v1/__init__.py
+-rw-r--r--  2.0 unx     2066 b- defN 23-Apr-10 17:22 nucliadb/train/api/v1/check.py
+-rw-r--r--  2.0 unx      910 b- defN 23-Apr-10 17:22 nucliadb/train/api/v1/router.py
+-rw-r--r--  2.0 unx     1905 b- defN 23-Apr-10 17:22 nucliadb/train/api/v1/shards.py
+-rw-r--r--  2.0 unx     1825 b- defN 23-Apr-10 17:22 nucliadb/train/api/v1/trainset.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/train/generators/__init__.py
+-rw-r--r--  2.0 unx     3289 b- defN 23-Apr-10 17:22 nucliadb/train/generators/field_classifier.py
+-rw-r--r--  2.0 unx     3594 b- defN 23-Apr-10 17:22 nucliadb/train/generators/paragraph_classifier.py
+-rw-r--r--  2.0 unx     4767 b- defN 23-Apr-10 17:22 nucliadb/train/generators/sentence_classifier.py
+-rw-r--r--  2.0 unx    10176 b- defN 23-Apr-10 17:22 nucliadb/train/generators/token_classifier.py
+-rw-r--r--  2.0 unx     2144 b- defN 23-Apr-10 17:22 nucliadb/train/generators/utils.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/train/tests/__init__.py
+-rw-r--r--  2.0 unx     1088 b- defN 23-Apr-10 17:22 nucliadb/train/tests/conftest.py
+-rw-r--r--  2.0 unx     8975 b- defN 23-Apr-10 17:22 nucliadb/train/tests/fixtures.py
+-rw-r--r--  2.0 unx     8132 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_field_classification.py
+-rw-r--r--  2.0 unx     2729 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_get_entities.py
+-rw-r--r--  2.0 unx     1660 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_get_info.py
+-rw-r--r--  2.0 unx     1382 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_get_ontology.py
+-rw-r--r--  2.0 unx     2201 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_get_ontology_count.py
+-rw-r--r--  2.0 unx     1416 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_list_fields.py
+-rw-r--r--  2.0 unx     2944 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_list_paragraphs.py
+-rw-r--r--  2.0 unx     1423 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_list_resources.py
+-rw-r--r--  2.0 unx     2863 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_list_sentences.py
+-rw-r--r--  2.0 unx     8129 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_paragraph_classification.py
+-rw-r--r--  2.0 unx     8349 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_sentence_classification.py
+-rw-r--r--  2.0 unx    10122 b- defN 23-Apr-10 17:22 nucliadb/train/tests/test_token_classification.py
+-rw-r--r--  2.0 unx     1328 b- defN 23-Apr-10 17:22 nucliadb/writer/__init__.py
+-rw-r--r--  2.0 unx     3578 b- defN 23-Apr-10 17:22 nucliadb/writer/app.py
+-rw-r--r--  2.0 unx      972 b- defN 23-Apr-10 17:22 nucliadb/writer/exceptions.py
+-rw-r--r--  2.0 unx     3881 b- defN 23-Apr-10 17:22 nucliadb/writer/lifecycle.py
+-rw-r--r--  2.0 unx     2186 b- defN 23-Apr-10 17:22 nucliadb/writer/openapi.py
+-rw-r--r--  2.0 unx     1011 b- defN 23-Apr-10 17:22 nucliadb/writer/run.py
+-rw-r--r--  2.0 unx     1062 b- defN 23-Apr-10 17:22 nucliadb/writer/settings.py
+-rw-r--r--  2.0 unx     1036 b- defN 23-Apr-10 17:22 nucliadb/writer/utilities.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/writer/api/__init__.py
+-rw-r--r--  2.0 unx     1021 b- defN 23-Apr-10 17:22 nucliadb/writer/api/v1/__init__.py
+-rw-r--r--  2.0 unx    22313 b- defN 23-Apr-10 17:22 nucliadb/writer/api/v1/field.py
+-rw-r--r--  2.0 unx     5395 b- defN 23-Apr-10 17:22 nucliadb/writer/api/v1/knowledgebox.py
+-rw-r--r--  2.0 unx    15253 b- defN 23-Apr-10 17:22 nucliadb/writer/api/v1/resource.py
+-rw-r--r--  2.0 unx     1034 b- defN 23-Apr-10 17:22 nucliadb/writer/api/v1/router.py
+-rw-r--r--  2.0 unx    14132 b- defN 23-Apr-10 17:22 nucliadb/writer/api/v1/services.py
+-rw-r--r--  2.0 unx    25470 b- defN 23-Apr-10 17:22 nucliadb/writer/api/v1/upload.py
+-rw-r--r--  2.0 unx     1618 b- defN 23-Apr-10 17:22 nucliadb/writer/layouts/__init__.py
+-rw-r--r--  2.0 unx     2115 b- defN 23-Apr-10 17:22 nucliadb/writer/layouts/v1.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/writer/resource/__init__.py
+-rw-r--r--  2.0 unx     1425 b- defN 23-Apr-10 17:22 nucliadb/writer/resource/audit.py
+-rw-r--r--  2.0 unx     8554 b- defN 23-Apr-10 17:22 nucliadb/writer/resource/basic.py
+-rw-r--r--  2.0 unx    15695 b- defN 23-Apr-10 17:22 nucliadb/writer/resource/field.py
+-rw-r--r--  2.0 unx     1708 b- defN 23-Apr-10 17:22 nucliadb/writer/resource/origin.py
+-rw-r--r--  2.0 unx     1151 b- defN 23-Apr-10 17:22 nucliadb/writer/resource/slug.py
+-rw-r--r--  2.0 unx     4991 b- defN 23-Apr-10 17:22 nucliadb/writer/resource/vectors.py
+-rw-r--r--  2.0 unx      835 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/__init__.py
+-rw-r--r--  2.0 unx     1144 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/conftest.py
+-rw-r--r--  2.0 unx     4275 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/fixtures.py
+-rw-r--r--  2.0 unx    16585 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/test_fields.py
+-rw-r--r--  2.0 unx    21645 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/test_files.py
+-rw-r--r--  2.0 unx     1932 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/test_knowledgebox.py
+-rw-r--r--  2.0 unx     4747 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/test_reprocess_file_field.py
+-rw-r--r--  2.0 unx    19059 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/test_resources.py
+-rw-r--r--  2.0 unx     5345 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/test_service.py
+-rw-r--r--  2.0 unx     3596 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/test_tus.py
+-rw-r--r--  2.0 unx     2028 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/tus.py
+-rw-r--r--  2.0 unx     1287 b- defN 23-Apr-10 17:22 nucliadb/writer/tests/utils.py
+-rw-r--r--  2.0 unx     4095 b- defN 23-Apr-10 17:22 nucliadb/writer/tus/__init__.py
+-rw-r--r--  2.0 unx     4396 b- defN 23-Apr-10 17:22 nucliadb/writer/tus/dm.py
+-rw-r--r--  2.0 unx     2186 b- defN 23-Apr-10 17:22 nucliadb/writer/tus/exceptions.py
+-rw-r--r--  2.0 unx    13818 b- defN 23-Apr-10 17:22 nucliadb/writer/tus/gcs.py
+-rw-r--r--  2.0 unx     5811 b- defN 23-Apr-10 17:22 nucliadb/writer/tus/local.py
+-rw-r--r--  2.0 unx     8571 b- defN 23-Apr-10 17:22 nucliadb/writer/tus/s3.py
+-rw-r--r--  2.0 unx     4682 b- defN 23-Apr-10 17:22 nucliadb/writer/tus/storage.py
+-rw-r--r--  2.0 unx     2580 b- defN 23-Apr-10 17:22 nucliadb/writer/tus/utils.py
+-rw-r--r--  2.0 unx     3143 b- defN 23-Apr-10 17:23 nucliadb-2.7.0.post146.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-10 17:23 nucliadb-2.7.0.post146.dist-info/WHEEL
+-rw-r--r--  2.0 unx      735 b- defN 23-Apr-10 17:23 nucliadb-2.7.0.post146.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        9 b- defN 23-Apr-10 17:23 nucliadb-2.7.0.post146.dist-info/top_level.txt
+-rw-r--r--  2.0 unx        1 b- defN 23-Apr-10 17:23 nucliadb-2.7.0.post146.dist-info/zip-safe
+-rw-rw-r--  2.0 unx    22995 b- defN 23-Apr-10 17:23 nucliadb-2.7.0.post146.dist-info/RECORD
+259 files, 1441514 bytes uncompressed, 411389 bytes compressed:  71.5%
```

## zipnote {}

```diff
@@ -45,14 +45,17 @@
 
 Filename: nucliadb/ingest/serialize.py
 Comment: 
 
 Filename: nucliadb/ingest/settings.py
 Comment: 
 
+Filename: nucliadb/ingest/txn_utils.py
+Comment: 
+
 Filename: nucliadb/ingest/utils.py
 Comment: 
 
 Filename: nucliadb/ingest/consumer/__init__.py
 Comment: 
 
 Filename: nucliadb/ingest/consumer/pull.py
@@ -750,26 +753,26 @@
 
 Filename: nucliadb/writer/tus/storage.py
 Comment: 
 
 Filename: nucliadb/writer/tus/utils.py
 Comment: 
 
-Filename: nucliadb-2.7.0.post145.dist-info/METADATA
+Filename: nucliadb-2.7.0.post146.dist-info/METADATA
 Comment: 
 
-Filename: nucliadb-2.7.0.post145.dist-info/WHEEL
+Filename: nucliadb-2.7.0.post146.dist-info/WHEEL
 Comment: 
 
-Filename: nucliadb-2.7.0.post145.dist-info/entry_points.txt
+Filename: nucliadb-2.7.0.post146.dist-info/entry_points.txt
 Comment: 
 
-Filename: nucliadb-2.7.0.post145.dist-info/top_level.txt
+Filename: nucliadb-2.7.0.post146.dist-info/top_level.txt
 Comment: 
 
-Filename: nucliadb-2.7.0.post145.dist-info/zip-safe
+Filename: nucliadb-2.7.0.post146.dist-info/zip-safe
 Comment: 
 
-Filename: nucliadb-2.7.0.post145.dist-info/RECORD
+Filename: nucliadb-2.7.0.post146.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## nucliadb/ingest/app.py

```diff
@@ -41,15 +41,15 @@
     transaction_settings,
 )
 from nucliadb_utils.transaction import LocalTransactionUtility, TransactionUtility
 from nucliadb_utils.utilities import (
     Utility,
     clean_utility,
     get_indexing,
-    get_transaction,
+    get_transaction_utility,
     set_utility,
     start_audit_utility,
     stop_audit_utility,
 )
 
 
 async def start_transaction_utility(service_name: Optional[str] = None):
@@ -83,15 +83,15 @@
             nats_target=indexing_settings.index_jetstream_target,
         )
         await indexing_utility.initialize(service_name)
         set_utility(Utility.INDEXING, indexing_utility)
 
 
 async def stop_transaction_utility():
-    transaction_utility = get_transaction()
+    transaction_utility = get_transaction_utility()
     if transaction_utility:
         await transaction_utility.finalize()
         clean_utility(Utility.TRANSACTION)
 
 
 async def stop_indexing_utility():
     indexing_utility = get_indexing()
```

## nucliadb/ingest/consumer/pull.py

```diff
@@ -39,15 +39,15 @@
 from nucliadb_telemetry import errors, metrics
 from nucliadb_utils.audit.audit import AuditStorage
 from nucliadb_utils.cache import KB_COUNTER_CACHE
 from nucliadb_utils.cache.utility import Cache
 from nucliadb_utils.exceptions import ShardsNotFound
 from nucliadb_utils.nats import get_traced_jetstream
 from nucliadb_utils.storages.storage import Storage
-from nucliadb_utils.utilities import get_transaction
+from nucliadb_utils.utilities import get_transaction_utility
 
 consumer_observer = metrics.Observer(
     "message_processor",
     labels={"source": ""},
     buckets=[
         0.01,
         0.025,
@@ -359,15 +359,15 @@
 
                         if data.get("status") == "ok":
                             logger.info(
                                 f"Message received from proxy, partition: {self.partition}"
                             )
                             async with self.lock:
                                 try:
-                                    transaction_utility = get_transaction()
+                                    transaction_utility = get_transaction_utility()
                                     if transaction_utility is None:
                                         raise Exception(
                                             "No transaction utility defined"
                                         )
 
                                     pb = BrokerMessage()
                                     pb.ParseFromString(
```

## nucliadb/ingest/maindb/tikv.py

```diff
@@ -46,14 +46,17 @@
 
     def __init__(self, txn: Any, driver: TiKVDriver):
         self.txn = txn
         self.driver = driver
         self.open = True
 
     async def abort(self):
+        if not self.open:
+            return
+
         with tikv_observer({"type": "rollback"}):
             await self.txn.rollback()
         self.open = False
 
     async def commit(
         self,
         worker: Optional[str] = None,
```

## nucliadb/ingest/orm/nodes_manager.py

```diff
@@ -36,25 +36,24 @@
 class NodesManager:
     def __init__(self, driver: Driver, cache):
         self.driver = driver
         self.cache = cache
 
     async def get_shards_by_kbid_inner(self, kbid: str) -> PBShards:
         key = KB_SHARDS.format(kbid=kbid)
-        txn = await self.driver.begin()
-        payload = await txn.get(key)
-        await txn.abort()
-        if payload is None:
-            # could be None because /shards doesn't exist, or beacause the whole KB does not exist.
-            # In any case, this should not happen
-            raise ShardsNotFound(kbid)
+        async with self.driver.transaction() as txn:
+            payload = await txn.get(key)
+            if payload is None:
+                # could be None because /shards doesn't exist, or beacause the whole KB does not exist.
+                # In any case, this should not happen
+                raise ShardsNotFound(kbid)
 
-        pb = PBShards()
-        pb.ParseFromString(payload)
-        return pb
+            pb = PBShards()
+            pb.ParseFromString(payload)
+            return pb
 
     async def get_shards_by_kbid(self, kbid: str) -> List[ShardObject]:
         shards = await self.get_shards_by_kbid_inner(kbid)
         return [x for x in shards.shards]
 
     def choose_node(
         self, shard: ShardObject, shard_replicas: Optional[List[str]] = None
```

## nucliadb/ingest/service/writer.py

```diff
@@ -113,15 +113,15 @@
 from nucliadb_utils.keys import KB_SHARDS
 from nucliadb_utils.storages.storage import Storage, StorageField
 from nucliadb_utils.utilities import (
     get_audit,
     get_cache,
     get_partitioning,
     get_storage,
-    get_transaction,
+    get_transaction_utility,
 )
 
 
 class WriterServicer(writer_pb2_grpc.WriterServicer):
     def __init__(self):
         self.partitions = settings.partitions
 
@@ -723,15 +723,15 @@
         txn = await self.proc.driver.begin()
         storage = await get_storage(service_name=SERVICE_NAME)
         cache = await get_cache()
 
         kbobj = KnowledgeBoxORM(txn, storage, cache, request.kbid)
         resobj = ResourceORM(txn, storage, kbobj, request.rid)
         bm = await resobj.generate_broker_message()
-        transaction = get_transaction()
+        transaction = get_transaction_utility()
         partitioning = get_partitioning()
         partition = partitioning.generate_partition(request.kbid, request.rid)
         await transaction.commit(bm, partition)
 
         response = IndexStatus()
         await txn.abort()
         return response
```

## nucliadb/search/api/v1/find.py

```diff
@@ -23,15 +23,14 @@
 
 from fastapi import Body, Header, Query, Request, Response
 from fastapi_versioning import version
 
 from nucliadb.models.responses import HTTPClientError
 from nucliadb.search.api.v1.router import KB_PREFIX, api
 from nucliadb.search.requesters.utils import Method, node_query
-from nucliadb.search.search.fetch import abort_transaction  # type: ignore
 from nucliadb.search.search.find_merge import find_merge_results
 from nucliadb.search.search.query import global_query_to_pb, pre_process_query
 from nucliadb.search.search.utils import parse_sort_options
 from nucliadb_models.common import FieldTypeName
 from nucliadb_models.metadata import ResourceProcessingStatus
 from nucliadb_models.resource import ExtractedDataTypeName, NucliaDBRoles
 from nucliadb_models.search import (
@@ -235,30 +234,27 @@
     )
 
     results, incomplete_results, queried_nodes, queried_shards = await node_query(
         kbid, Method.SEARCH, pb_query, item.shards
     )
 
     # We need to merge
-    try:
-        search_results = await find_merge_results(
-            results,
-            count=item.page_size,
-            page=item.page_number,
-            kbid=kbid,
-            show=item.show,
-            field_type_filter=item.field_type_filter,
-            extracted=item.extracted,
-            sort=sort_options,
-            requested_relations=pb_query.relation_subgraph,
-            min_score=item.min_score,
-            highlight=item.highlight,
-        )
-    finally:
-        await abort_transaction()
+    search_results = await find_merge_results(
+        results,
+        count=item.page_size,
+        page=item.page_number,
+        kbid=kbid,
+        show=item.show,
+        field_type_filter=item.field_type_filter,
+        extracted=item.extracted,
+        sort=sort_options,
+        requested_relations=pb_query.relation_subgraph,
+        min_score=item.min_score,
+        highlight=item.highlight,
+    )
 
     response.status_code = 206 if incomplete_results else 200
 
     if audit is not None and do_audit:
         await audit.search(
             kbid,
             x_nucliadb_user,
```

## nucliadb/search/api/v1/knowledgebox.py

```diff
@@ -26,17 +26,17 @@
 from grpc import StatusCode as GrpcStatusCode
 from grpc.aio import AioRpcError  # type: ignore
 from nucliadb_protos.noderesources_pb2 import Shard
 from nucliadb_protos.writer_pb2 import ShardObject as PBShardObject
 from nucliadb_protos.writer_pb2 import Shards
 
 from nucliadb.ingest.orm.resource import KB_RESOURCE_SLUG_BASE
+from nucliadb.ingest.txn_utils import abort_transaction
 from nucliadb.search import logger
 from nucliadb.search.api.v1.router import KB_PREFIX, api
-from nucliadb.search.search.fetch import abort_transaction  # type: ignore
 from nucliadb.search.search.shards import get_shard
 from nucliadb.search.settings import settings
 from nucliadb.search.utilities import get_driver, get_nodes
 from nucliadb_models.resource import NucliaDBRoles
 from nucliadb_models.search import KnowledgeboxCounters, KnowledgeboxShards
 from nucliadb_telemetry import errors
 from nucliadb_utils.authentication import requires, requires_one
```

## nucliadb/search/api/v1/resource.py

```diff
@@ -20,17 +20,17 @@
 from datetime import datetime
 from typing import List, Optional
 
 from fastapi import Header, HTTPException, Query, Request, Response
 from fastapi_versioning import version
 
 from nucliadb.ingest.serialize import get_resource_uuid_by_slug
+from nucliadb.ingest.txn_utils import abort_transaction
 from nucliadb.search import SERVICE_NAME
 from nucliadb.search.requesters.utils import Method, node_query
-from nucliadb.search.search.fetch import abort_transaction
 from nucliadb.search.search.merge import merge_paragraphs_results
 from nucliadb.search.search.query import paragraph_query_to_pb
 from nucliadb_models.common import FieldTypeName
 from nucliadb_models.resource import ExtractedDataTypeName, NucliaDBRoles
 from nucliadb_models.search import (
     NucliaDBClientType,
     ResourceProperties,
```

## nucliadb/search/api/v1/search.py

```diff
@@ -20,18 +20,18 @@
 from datetime import datetime
 from time import time
 from typing import List, Optional, Union
 
 from fastapi import Body, Header, Query, Request, Response
 from fastapi_versioning import version
 
+from nucliadb.ingest.txn_utils import abort_transaction
 from nucliadb.models.responses import HTTPClientError
 from nucliadb.search.api.v1.router import KB_PREFIX, api
 from nucliadb.search.requesters.utils import Method, node_query
-from nucliadb.search.search.fetch import abort_transaction  # type: ignore
 from nucliadb.search.search.merge import merge_results
 from nucliadb.search.search.query import global_query_to_pb, pre_process_query
 from nucliadb.search.search.utils import parse_sort_options
 from nucliadb_models.common import FieldTypeName
 from nucliadb_models.metadata import ResourceProcessingStatus
 from nucliadb_models.resource import ExtractedDataTypeName, NucliaDBRoles
 from nucliadb_models.search import (
```

## nucliadb/search/api/v1/suggest.py

```diff
@@ -20,17 +20,17 @@
 from datetime import datetime
 from time import time
 from typing import List, Optional
 
 from fastapi import Header, Query, Request, Response
 from fastapi_versioning import version
 
+from nucliadb.ingest.txn_utils import abort_transaction
 from nucliadb.search.api.v1.router import KB_PREFIX, api
 from nucliadb.search.requesters.utils import Method, node_query
-from nucliadb.search.search.fetch import abort_transaction  # type: ignore
 from nucliadb.search.search.merge import merge_suggest_results
 from nucliadb.search.search.query import suggest_query_to_pb
 from nucliadb_models.common import FieldTypeName
 from nucliadb_models.resource import NucliaDBRoles
 from nucliadb_models.search import (
     KnowledgeboxSuggestResults,
     NucliaDBClientType,
```

## nucliadb/search/requesters/utils.py

```diff
@@ -32,16 +32,16 @@
     SearchRequest,
     SearchResponse,
     SuggestRequest,
     SuggestResponse,
 )
 from nucliadb_protos.writer_pb2 import ShardObject as PBShardObject
 
+from nucliadb.ingest.txn_utils import abort_transaction
 from nucliadb.search import logger
-from nucliadb.search.search.fetch import abort_transaction  # type: ignore
 from nucliadb.search.search.shards import (
     query_paragraph_shard,
     query_shard,
     relations_shard,
     suggest_shard,
 )
 from nucliadb.search.settings import settings
```

## nucliadb/search/search/fetch.py

```diff
@@ -23,59 +23,42 @@
 from contextvars import ContextVar
 from typing import Dict, List, Optional, Tuple
 
 from lru import LRU  # type: ignore
 from nucliadb_protos.nodereader_pb2 import DocumentResult, ParagraphResult
 from nucliadb_protos.resources_pb2 import Paragraph
 
-from nucliadb.ingest.maindb.driver import Transaction
 from nucliadb.ingest.orm.knowledgebox import KnowledgeBox as KnowledgeBoxORM
 from nucliadb.ingest.orm.resource import KB_REVERSE
 from nucliadb.ingest.orm.resource import Resource as ResourceORM
 from nucliadb.ingest.serialize import serialize
-from nucliadb.ingest.utils import get_driver
+from nucliadb.ingest.txn_utils import get_transaction
 from nucliadb.search import SERVICE_NAME, logger
 from nucliadb_models.common import FieldTypeName
 from nucliadb_models.resource import ExtractedDataTypeName, Resource
 from nucliadb_models.search import ResourceProperties
 from nucliadb_utils.utilities import get_cache, get_storage
 
 rcache: ContextVar[Optional[Dict[str, ResourceORM]]] = ContextVar(
     "rcache", default=None
 )
-txn: ContextVar[Optional[Transaction]] = ContextVar("txn", default=None)
 
 RESOURCE_LOCKS: Dict[str, asyncio.Lock] = LRU(1000)
 
 PRE_WORD = string.punctuation + " "
 
 
 def get_resource_cache(clear: bool = False) -> Dict[str, ResourceORM]:
     value: Optional[Dict[str, ResourceORM]] = rcache.get()
     if value is None or clear:
         value = {}
         rcache.set(value)
     return value
 
 
-async def get_transaction() -> Transaction:
-    transaction: Optional[Transaction] = txn.get()
-    if transaction is None:
-        driver = await get_driver()
-        transaction = await driver.begin()
-        txn.set(transaction)
-    return transaction
-
-
-async def abort_transaction() -> None:
-    transaction: Optional[Transaction] = txn.get()
-    if transaction is not None:
-        await transaction.abort()
-
-
 async def fetch_resources(
     resources: List[str],
     kbid: str,
     show: List[ResourceProperties],
     field_type_filter: List[FieldTypeName],
     extracted: List[ExtractedDataTypeName],
 ) -> Dict[str, Resource]:
```

## nucliadb/search/search/find_merge.py

```diff
@@ -25,14 +25,15 @@
     EntitiesSubgraphRequest,
     ParagraphResult,
     SearchResponse,
 )
 
 from nucliadb.ingest.orm.resource import KB_REVERSE
 from nucliadb.ingest.serialize import serialize
+from nucliadb.ingest.txn_utils import abort_transaction, get_transaction
 from nucliadb.search import SERVICE_NAME, logger
 from nucliadb.search.search.fetch import (
     get_resource_cache,
     get_resource_from_cache,
     highlight_paragraph,
 )
 from nucliadb.search.search.merge import merge_relations_results
@@ -361,14 +362,19 @@
     field_type_filter: List[FieldTypeName],
     extracted: List[ExtractedDataTypeName],
     sort: SortOptions,
     requested_relations: EntitiesSubgraphRequest,
     min_score: float = 0.85,
     highlight: bool = False,
 ) -> KnowledgeboxFindResults:
+    # force getting transaction on current asyncio task
+    # so all sub tasks will use the same transaction
+    # this is contextvar magic that is probably not ideal
+    await get_transaction()
+
     paragraphs: List[List[ParagraphResult]] = []
     vectors: List[List[DocumentScored]] = []
     relations = []
 
     # facets_counter = Counter()
     next_page = True
     ematches: List[str] = []
@@ -414,8 +420,10 @@
         extracted,
         highlight,
         ematches,
     )
     api_results.relations = await merge_relations_results(
         relations, requested_relations
     )
+
+    await abort_transaction()
     return api_results
```

## nucliadb/train/generators/utils.py

```diff
@@ -17,45 +17,33 @@
 # You should have received a copy of the GNU Affero General Public License
 # along with this program. If not, see <http://www.gnu.org/licenses/>.
 #
 
 from contextvars import ContextVar
 from typing import Dict, Optional
 
-from nucliadb.ingest.maindb.driver import Transaction
 from nucliadb.ingest.orm.knowledgebox import KnowledgeBox as KnowledgeBoxORM
 from nucliadb.ingest.orm.resource import Resource as ResourceORM
-from nucliadb.ingest.utils import get_driver
+from nucliadb.ingest.txn_utils import get_transaction
 from nucliadb.train import SERVICE_NAME
 from nucliadb_utils.utilities import get_cache, get_storage
 
 rcache: ContextVar[Optional[Dict[str, ResourceORM]]] = ContextVar(
     "rcache", default=None
 )
 
-txn: ContextVar[Optional[Transaction]] = ContextVar("txn", default=None)
-
 
 def get_resource_cache(clear: bool = False) -> Dict[str, ResourceORM]:
     value: Optional[Dict[str, ResourceORM]] = rcache.get()
     if value is None or clear:
         value = {}
         rcache.set(value)
     return value
 
 
-async def get_transaction() -> Transaction:
-    transaction: Optional[Transaction] = txn.get()
-    if transaction is None:
-        driver = await get_driver()
-        transaction = await driver.begin()
-        txn.set(transaction)
-    return transaction
-
-
 async def get_resource_from_cache(kbid: str, uuid: str) -> Optional[ResourceORM]:
     resouce_cache = get_resource_cache()
     orm_resource: Optional[ResourceORM] = None
     if uuid not in resouce_cache:
         transaction = await get_transaction()
         storage = await get_storage(service_name=SERVICE_NAME)
         cache = await get_cache()
```

## nucliadb/writer/lifecycle.py

```diff
@@ -31,15 +31,15 @@
 from nucliadb_utils.settings import (
     nuclia_settings,
     running_settings,
     storage_settings,
     transaction_settings,
 )
 from nucliadb_utils.transaction import LocalTransactionUtility, TransactionUtility
-from nucliadb_utils.utilities import Utility, get_transaction, set_utility
+from nucliadb_utils.utilities import Utility, get_transaction_utility, set_utility
 
 
 async def initialize():
     await setup_telemetry(SERVICE_NAME)
 
     await start_ingest(SERVICE_NAME)
 
@@ -84,15 +84,15 @@
         stream=sys.stderr,
     )
 
     logger.setLevel(logging.getLevelName(running_settings.log_level.upper()))
 
 
 async def finalize():
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     if transaction is not None:
         await transaction.finalize()
 
     await stop_ingest()
     processing = get_processing()
     if processing is not None:
         await processing.finalize()
```

## nucliadb/writer/api/v1/field.py

```diff
@@ -51,15 +51,15 @@
 from nucliadb_telemetry.utils import set_info_on_span
 from nucliadb_utils.authentication import requires
 from nucliadb_utils.exceptions import LimitsExceededError, SendToProcessError
 from nucliadb_utils.utilities import (
     get_cache,
     get_partitioning,
     get_storage,
-    get_transaction,
+    get_transaction_utility,
 )
 
 if TYPE_CHECKING:  # pragma: no cover
     SKIP_STORE_DEFAULT = False
     FIELD_TYPE_NAME_TO_FIELD_TYPE_MAP: Dict[models.FieldTypeName, FieldType.V]
     SYNC_CALL = False
     X_NUCLIADB_USER = ""
@@ -113,15 +113,15 @@
 async def finish_field_put(
     writer: BrokerMessage,
     toprocess: PushPayload,
     partition: int,
     wait_on_commit: bool,
 ) -> int:
     # Create processing message
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     processing = get_processing()
 
     processing_info = await processing.send_to_process(toprocess, partition)
 
     writer.source = BrokerMessage.MessageSource.WRITER
     set_processing_info(writer, processing_info)
     await transaction.commit(writer, partition, wait=wait_on_commit)
@@ -431,15 +431,15 @@
     kbid: str,
     field_id: str,
     messages: List[models.InputMessage],
     rid: Optional[str] = None,
     rslug: Optional[str] = None,
     x_synchronous: bool = SYNC_CALL,
 ) -> ResourceFieldAdded:
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     processing = get_processing()
     partitioning = get_partitioning()
 
     rid = await get_rid_from_params_or_raise_error(kbid, rid, rslug)
 
     partition = partitioning.generate_partition(kbid, rid)
 
@@ -501,15 +501,15 @@
     kbid: str,
     field_id: str,
     blocks: Dict[str, models.InputBlock],
     rid: Optional[str] = None,
     rslug: Optional[str] = None,
     x_synchronous: bool = SYNC_CALL,
 ) -> ResourceFieldAdded:
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     processing = get_processing()
     partitioning = get_partitioning()
 
     rid = await get_rid_from_params_or_raise_error(kbid, rid, rslug)
 
     partition = partitioning.generate_partition(kbid, rid)
 
@@ -570,15 +570,15 @@
     kbid: str,
     field_type: models.FieldTypeName,
     field_id: str,
     rid: Optional[str] = None,
     rslug: Optional[str] = None,
     x_synchronous: bool = SYNC_CALL,
 ):
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     partitioning = get_partitioning()
 
     rid = await get_rid_from_params_or_raise_error(kbid, rid, rslug)
 
     partition = partitioning.generate_partition(kbid, rid)
     writer = BrokerMessage()
 
@@ -610,15 +610,15 @@
     request: Request,
     kbid: str,
     rid: str,
     field_id: str,
     x_nucliadb_user: str = X_NUCLIADB_USER,
     x_file_password: Optional[str] = X_FILE_PASSWORD,
 ) -> ResourceUpdated:
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     processing = get_processing()
     partitioning = get_partitioning()
 
     partition = partitioning.generate_partition(kbid, rid)
 
     toprocess = PushPayload(
         uuid=rid,
```

## nucliadb/writer/api/v1/resource.py

```diff
@@ -77,15 +77,15 @@
 from nucliadb_utils.authentication import requires
 from nucliadb_utils.exceptions import LimitsExceededError, SendToProcessError
 from nucliadb_utils.utilities import (
     get_cache,
     get_ingest,
     get_partitioning,
     get_storage,
-    get_transaction,
+    get_transaction_utility,
 )
 
 if TYPE_CHECKING:  # pragma: no cover
     SKIP_STORE_DEFAULT = False
     SYNC_CALL = False
     X_NUCLIADB_USER = ""
 else:
@@ -108,15 +108,15 @@
 async def create_resource(
     request: Request,
     item: CreateResourcePayload,
     kbid: str,
     x_skip_store: bool = SKIP_STORE_DEFAULT,
     x_synchronous: bool = SYNC_CALL,
 ):
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     processing = get_processing()
     partitioning = get_partitioning()
 
     # Create resource message
     uuid = uuid4().hex
     partition = partitioning.generate_partition(kbid, uuid)
 
@@ -228,15 +228,15 @@
     kbid: str,
     rid: Optional[str] = None,
     rslug: Optional[str] = None,
     x_skip_store: bool = SKIP_STORE_DEFAULT,
     x_synchronous: bool = SYNC_CALL,
     x_nucliadb_user: str = X_NUCLIADB_USER,
 ):
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     processing = get_processing()
     partitioning = get_partitioning()
 
     rid = await get_rid_from_params_or_raise_error(kbid, rid, rslug)
 
     partition = partitioning.generate_partition(kbid, rid)
 
@@ -312,15 +312,15 @@
 async def reprocess_resource(
     request: Request,
     kbid: str,
     rid: Optional[str] = None,
     rslug: Optional[str] = None,
     x_nucliadb_user: str = X_NUCLIADB_USER,
 ):
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     processing = get_processing()
     partitioning = get_partitioning()
 
     rid = await get_rid_from_params_or_raise_error(kbid, rid, rslug)
 
     partition = partitioning.generate_partition(kbid, rid)
 
@@ -391,15 +391,15 @@
 async def delete_resource(
     request: Request,
     kbid: str,
     rid: Optional[str] = None,
     rslug: Optional[str] = None,
     x_synchronous: bool = SYNC_CALL,
 ):
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     partitioning = get_partitioning()
 
     rid = await get_rid_from_params_or_raise_error(kbid, rid, rslug)
 
     set_info_on_span({"nuclia.kbid": kbid, "nucliadb.rid": rid})
 
     partition = partitioning.generate_partition(kbid, rid)
```

## nucliadb/writer/api/v1/upload.py

```diff
@@ -70,15 +70,15 @@
 from nucliadb_utils.authentication import requires_one
 from nucliadb_utils.exceptions import LimitsExceededError, SendToProcessError
 from nucliadb_utils.storages.storage import KB_RESOURCE_FIELD
 from nucliadb_utils.utilities import (
     get_ingest,
     get_partitioning,
     get_storage,
-    get_transaction,
+    get_transaction_utility,
 )
 
 from .router import KB_PREFIX, RESOURCE_PREFIX, RSLUG_PREFIX, api
 
 TUS_HEADERS = {
     "Tus-Resumable": "1.0.0",
     "Tus-Version": "1.0.0",
@@ -656,15 +656,15 @@
     md5: Optional[str] = None,
     item: Optional[CreateResourcePayload] = None,
     wait_on_commit: bool = False,
 ) -> int:
     # File is on NucliaDB Storage at path
 
     partitioning = get_partitioning()
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
     processing = get_processing()
     storage = await get_storage(service_name=SERVICE_NAME)
 
     partition = partitioning.generate_partition(kbid, rid)
 
     writer = BrokerMessage()
     toprocess = PushPayload(
```

## nucliadb/writer/tests/test_files.py

```diff
@@ -28,15 +28,15 @@
 from nucliadb_protos.writer_pb2 import BrokerMessage, ResourceFieldId
 
 from nucliadb.writer.api.v1.router import KB_PREFIX, RSLUG_PREFIX
 from nucliadb.writer.api.v1.upload import maybe_b64decode
 from nucliadb.writer.tus import TUSUPLOAD, UPLOAD
 from nucliadb.writer.utilities import get_processing
 from nucliadb_models.resource import NucliaDBRoles
-from nucliadb_utils.utilities import get_ingest, get_storage, get_transaction
+from nucliadb_utils.utilities import get_ingest, get_storage, get_transaction_utility
 
 ASSETS_PATH = os.path.dirname(__file__) + "/assets"
 
 
 @pytest.mark.asyncio
 async def test_knowledgebox_file_tus_options(
     writer_api: Callable[[List[NucliaDBRoles]], AsyncClient], knowledgebox_writer: str
@@ -117,15 +117,15 @@
                 )
                 offset += len(data)
                 data = f.read(10000)
 
         assert resp.headers["Tus-Upload-Finished"] == "1"
 
     processing = get_processing()
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
 
     sub = await transaction.js.pull_subscribe("nucliadb.1", "auto")
     msgs = await sub.fetch(1)
 
     writer = BrokerMessage()
     writer.ParseFromString(msgs[0].data)
     await msgs[0].ack()
@@ -179,15 +179,15 @@
                     "content-type": "image/jpg",
                     "X-MD5": "7af0916dba8b70e29d99e72941923529",
                 },
             )
             assert resp.status_code == 201
 
     processing = get_processing()
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
 
     assert transaction.js is not None
     sub = await transaction.js.pull_subscribe("nucliadb.1", "auto")
     msgs = await sub.fetch(1)
     writer = BrokerMessage()
     writer.ParseFromString(msgs[0].data)
     await msgs[0].ack()
@@ -240,15 +240,15 @@
                     "X-MD5": "7af0916dba8b70e29d99e72941923529",
                     "content-type": "image/jpg",
                 },
             )
             assert resp.status_code == 201
 
     processing = get_processing()
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
 
     assert transaction.js is not None
     sub = await transaction.js.pull_subscribe("nucliadb.1", "auto")
     msgs = await sub.fetch(1)
     writer = BrokerMessage()
     writer.ParseFromString(msgs[0].data)
     await msgs[0].ack()
@@ -333,15 +333,15 @@
                 assert resp.status_code == 200
                 offset += len(data)
                 data = f.read(10000)
 
         assert resp.headers["Tus-Upload-Finished"] == "1"
 
     processing = get_processing()
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
 
     sub = await transaction.js.pull_subscribe("nucliadb.1", "auto")
     msgs = await sub.fetch(2)
 
     writer = BrokerMessage()
     writer.ParseFromString(msgs[1].data)
     await msgs[1].ack()
@@ -386,15 +386,15 @@
                     "X-MD5": "7af0916dba8b70e29d99e72941923529",
                     "content-type": "image/jpg",
                 },
             )
             assert resp.status_code == 201
 
     processing = get_processing()
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
 
     sub = await transaction.js.pull_subscribe("nucliadb.1", "auto")
     msgs = await sub.fetch(2)
     writer = BrokerMessage()
     writer.ParseFromString(msgs[1].data)
     await msgs[1].ack()
 
@@ -509,15 +509,15 @@
                 assert resp.status_code == 200
                 offset += len(data)
                 data = f.read(10000)
 
         assert resp.headers["Tus-Upload-Finished"] == "1"
 
     processing = get_processing()
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
 
     sub = await transaction.js.pull_subscribe("nucliadb.1", "auto")
     msgs = await sub.fetch(2)
 
     writer = BrokerMessage()
     writer.ParseFromString(msgs[1].data)
     await msgs[1].ack()
@@ -572,15 +572,15 @@
                     "content-type": "image/jpg",
                     "X-MD5": "7af0916dba8b70e29d99e72941923529",
                 },
             )
             assert resp.status_code == 201
 
     processing = get_processing()
-    transaction = get_transaction()
+    transaction = get_transaction_utility()
 
     sub = await transaction.js.pull_subscribe("nucliadb.1", "auto")
     msgs = await sub.fetch(2)
 
     writer = BrokerMessage()
     writer.ParseFromString(msgs[-1].data)
     await msgs[-1].ack()
```

## Comparing `nucliadb-2.7.0.post145.dist-info/METADATA` & `nucliadb-2.7.0.post146.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: nucliadb
-Version: 2.7.0.post145
+Version: 2.7.0.post146
 Summary: UNKNOWN
 Home-page: https://nucliadb.com
 Author: NucliaDB Community
 Author-email: nucliadb@nuclia.com
 License: BSD
 Project-URL: Nuclia, https://nuclia.com
 Project-URL: Github, https://github.com/nuclia/nucliadb
@@ -54,17 +54,17 @@
 Requires-Dist: mmh3 (>=3.0.0)
 Requires-Dist: httpx (>=0.23.0)
 Requires-Dist: types-pkg-resources (>=0.1.3)
 Requires-Dist: grpc-stubs (>=1.24.7)
 Requires-Dist: aiodns (>=3.0.0)
 Requires-Dist: types-orjson
 Requires-Dist: nucliadb-telemetry (>=1.8.0)
-Requires-Dist: nucliadb-utils[cache,fastapi,storages] (==2.7.0-post145)
-Requires-Dist: nucliadb-protos (==2.7.0-post145)
-Requires-Dist: nucliadb-models (==2.7.0-post145)
+Requires-Dist: nucliadb-utils[cache,fastapi,storages] (==2.7.0-post146)
+Requires-Dist: nucliadb-protos (==2.7.0-post146)
+Requires-Dist: nucliadb-models (==2.7.0-post146)
 Requires-Dist: tikv-client (>=0.0.3)
 Requires-Dist: prometheus-client (>=0.12.0)
 Requires-Dist: opentelemetry-instrumentation-aiohttp-client (>=0.30b1)
 Requires-Dist: opentelemetry-semantic-conventions (>=0.30b1)
 Requires-Dist: opentelemetry-instrumentation-fastapi (>=0.30b1)
 Requires-Dist: opentelemetry-propagator-b3
 Requires-Dist: multidict (>=6.0.4)
```

## Comparing `nucliadb-2.7.0.post145.dist-info/entry_points.txt` & `nucliadb-2.7.0.post146.dist-info/entry_points.txt`

 * *Files identical despite different names*

## Comparing `nucliadb-2.7.0.post145.dist-info/RECORD` & `nucliadb-2.7.0.post146.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -3,25 +3,26 @@
 nucliadb/config.py,sha256=rGPZTX_Ni6BG4g4qAp-bbr7XmUaRBbmFaegOysFBbGs,4556
 nucliadb/logging.py,sha256=moPKHbTi0EIAREiScI-eyjo3hvGRt02eqi-IrrMdUv0,2785
 nucliadb/purge.py,sha256=y5uFOK3YQU9XgehSSjYiEZCiB0F8qukgI18Hgw2Dy-o,1393
 nucliadb/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 nucliadb/run.py,sha256=6mD0gMbBgl5VgVc8Ic3LxUHgzT9lkZRhql-xNC41J9w,3268
 nucliadb/settings.py,sha256=GP2hJAYSLXO3mUopKrH4rgwOgX4M1n-_gHLd6UvI-60,1945
 nucliadb/ingest/__init__.py,sha256=fsw3C38VP50km3R-nHL775LNGPpJ4JxqXJ2Ib1f5SqE,1011
-nucliadb/ingest/app.py,sha256=IVgLbLUMnM-2wTWdUg4BeI3htrY0ZFsDFVEn2wokvPw,6338
+nucliadb/ingest/app.py,sha256=zewc8tjuhKZjVov127VXZ6f1E76fbMZmSbvRXvSHBG0,6354
 nucliadb/ingest/cache.py,sha256=XPmNNa6KP7P5Mp0Iivl3vIFFMz9rOs9POpHkzj9wpwU,995
 nucliadb/ingest/chitchat.py,sha256=Nj9W6XwWwjjn3ufFo2D8-t2CLiz5AKwNERwvhCPcaMY,6874
 nucliadb/ingest/partitions.py,sha256=a3fXq3DwRiDjcQNBcUtDTra8prIf-r5_z0B69ll_pag,2425
 nucliadb/ingest/processing.py,sha256=FicanxeoCPeXyD4ohb7HqaR0r6jRQdy7w5e_GGRcD3k,14757
 nucliadb/ingest/purge.py,sha256=vCtIr2LZph6AcMpXaRxYhk2Dvmw_Sf7sXvUKDG46c40,5463
 nucliadb/ingest/serialize.py,sha256=IEWub60ECe9jBJxq561xxN3DlTYXfWGR9btTiwLRPL4,17721
 nucliadb/ingest/settings.py,sha256=umVQk-byZzuR0rHFvDKjirLzcqIDAOsMaFYLzwuM3Xc,3021
+nucliadb/ingest/txn_utils.py,sha256=qM5-531Yjjp_MRGlXNmTDkJVx2vmiFKMK6bho-rPSD8,2531
 nucliadb/ingest/utils.py,sha256=KhRfOpRfjySzwGsa45Ey_usmCwD0kph6dg0HEbOAQR4,4255
 nucliadb/ingest/consumer/__init__.py,sha256=7Bi0uZMbpYNrqPpWGATaWYd5wn_k5cfVSS_FGYmJspc,1087
-nucliadb/ingest/consumer/pull.py,sha256=DNTrjbjwcTzZoYSMA-MGeetcVtz8yFMe3v9lh2WV6hQ,16928
+nucliadb/ingest/consumer/pull.py,sha256=hLMwm0CbA-YYlkYmxDcnRAhJb0eyX3H7jWwUZD3LWLk,16944
 nucliadb/ingest/consumer/service.py,sha256=fEG7rwIuikUdZ3UkGnE3k35nqpzzud1r9J2LhCBHbmM,6425
 nucliadb/ingest/fields/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/ingest/fields/base.py,sha256=fEh3CSXkgWXkhsGBcUYx18a7iBD6xBXJq-4GSGWEnUU,20415
 nucliadb/ingest/fields/conversation.py,sha256=v5h5GrdvKW_hB2DYloyV0qlzIK1QF3CX4nI0GCp9M90,6823
 nucliadb/ingest/fields/date.py,sha256=jXMWfdCv87oVySDQORXhMZ1Zvpw_aOpcrYAfUSnL3uA,1223
 nucliadb/ingest/fields/exceptions.py,sha256=J0nqFK89OhckJ0GMPrT2vVAdIHpYwDK3UoYQXOHuA_M,1205
 nucliadb/ingest/fields/file.py,sha256=RtLlnDuT3bueO7V0gnm_i_P1lUCG9l6CZFky0fFCCgg,5159
@@ -33,36 +34,36 @@
 nucliadb/ingest/maindb/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/ingest/maindb/driver.py,sha256=8OUkigq5HltfJkbE30YgAFp0pYQFclTeeAoOQ-GG8Mc,3088
 nucliadb/ingest/maindb/exceptions.py,sha256=elpq2rOB746AsuaLxi01JYTWxCKrA6eWryqUtuleQ20,877
 nucliadb/ingest/maindb/keys.py,sha256=dxDqDWai3fLG15GhLwqkOisMqk_dt6ZYKYEGvjnYeRU,980
 nucliadb/ingest/maindb/local.py,sha256=gF6ora87AlX3GlOzWRtVv1lhmd7eEEGK3ztp-DohbAE,7607
 nucliadb/ingest/maindb/pg.py,sha256=Y--CzE-_Pg1oh3uztHfJsN1j-LHXTBn60C1EGm0yyGA,6115
 nucliadb/ingest/maindb/redis.py,sha256=1XiAvGUIlQdUZo4_t2F7ERxnqng61iyrrUwJTDPMZjY,6807
-nucliadb/ingest/maindb/tikv.py,sha256=s2rfx1Y6xozNaFA8NgGo2CtPhULbFygdV2DR_VkSX1k,6974
+nucliadb/ingest/maindb/tikv.py,sha256=3w4u0S5OjwJKq8yzd0i4XnCHrdiCe_8dR0qQpTiWohE,7020
 nucliadb/ingest/orm/__init__.py,sha256=Ot6Rl-iwGAYSIr6QmsH1d-sM_xKzePYK5HvXFoTtRfE,3628
 nucliadb/ingest/orm/abc.py,sha256=CYbuvTdhBJxPPfV0WDnNzNM08gLb6LuRfdmbNMGVT68,7137
 nucliadb/ingest/orm/brain.py,sha256=gP7QOu-D1seUovRI-H2a7pzoCa9HUtpwpPsiu4hYf5E,20650
 nucliadb/ingest/orm/entities.py,sha256=JmiKOZpVlGn-EaM2BdEgEG90_Xj1_dBjlD5_Tumaq8k,15071
 nucliadb/ingest/orm/exceptions.py,sha256=f4ihB27Bi4l5LKXDpXJt4H4mQCD4r7npK_aA20e2W8Q,1362
 nucliadb/ingest/orm/grpc_node_binding.py,sha256=Fw16RI6Jr96WgudPGpI93j6EDBomwIm1l12z3Qt-W_w,12586
 nucliadb/ingest/orm/grpc_node_dummy.py,sha256=Pz6EB8fd2lw1pG447LrvSJQ8y_6XsiAJIvbc7jViHY4,5009
 nucliadb/ingest/orm/knowledgebox.py,sha256=IEAUkTEzi8xb0Des2QULZJnvV6iX-Q1s113bd_JKmPw,21289
 nucliadb/ingest/orm/labels.py,sha256=2caUR5M5L3_tw2Sp9XyevO-yXdNpGUUxrR0vpQnTsmo,1730
 nucliadb/ingest/orm/local_node.py,sha256=-YukxuAPEr8AsXJsGfqNl9E25wuHs4ljrwG1TXrizLU,4291
 nucliadb/ingest/orm/local_shard.py,sha256=VHykQW3U9brM_lo4kd96EIbeGESDPh0gKbpPdGtTVw0,2864
 nucliadb/ingest/orm/node.py,sha256=v_BSPwwJDIRP0_gVayBcEKkyn3I0oqIkaoXH7FD-3N4,19962
-nucliadb/ingest/orm/nodes_manager.py,sha256=9z28W_U4KG86GzLIr2_FXCf-IG2uNCDulEV4WfNYt94,4293
+nucliadb/ingest/orm/nodes_manager.py,sha256=XE521hT_gm1MrJvribLFsk_Zj_9vQFcs6Xl7bHntn3c,4312
 nucliadb/ingest/orm/processor.py,sha256=4IXNvwQlYoSeCTfOKkEpiJQGCU8P1YcrnfqH0dLyrBo,26056
 nucliadb/ingest/orm/resource.py,sha256=tSlgS2oU1_QQLr7Rz5baHUr1Pgb1wa9sPjQVqwbowBo,49605
 nucliadb/ingest/orm/shard.py,sha256=75Dnb0LjzUWUgG1HLWvAsNpBTUaHDEqK_LJw8mVKIR0,5087
 nucliadb/ingest/orm/synonyms.py,sha256=BuqS8XxLLVP124zPLGISgrmQg94LdalaTHeOVp_6dIY,1739
 nucliadb/ingest/orm/utils.py,sha256=9vTugcLweai69WWinatWm1RTyukJEDDte3qXNLqS7pI,3340
 nucliadb/ingest/service/__init__.py,sha256=79pKu4eNXDmflkf2qLhY5uxUUHl5UiyA3RBVBHmLDRI,2817
 nucliadb/ingest/service/exceptions.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
-nucliadb/ingest/service/writer.py,sha256=MBlbdD_tHvQXM0IvsXnLwDePMTQoHc53yVAxDpVT58E,35999
+nucliadb/ingest/service/writer.py,sha256=gluugdNANP9p_o2y1EIRWCXdP_qlPmnZMYyGO_Zu1Dw,36015
 nucliadb/ingest/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/ingest/tests/conftest.py,sha256=vu6f6UsfajjAZwBcbecc7xvRZpr7Yqj7qxalHYtgRtE,1096
 nucliadb/ingest/tests/fixtures.py,sha256=ECt9PGsg2UihZFJiXLMkmTOBY-J2vr-2U9hIsl3pojo,24774
 nucliadb/ingest/tests/tikv.py,sha256=MGwBL9ezcOOR8JwttouQ8Qj6534d742i2A3TAumdrM4,7549
 nucliadb/ingest/tests/vectors.py,sha256=C04U7O6d7UxBfS3GVGeaMsYjlKIQQze7-gaOFvvfeyM,42967
 nucliadb/models/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/models/responses.py,sha256=ySnO1-NLZoeK-ud3d1YcmmBeznsG7m2pyX2KdKzSTRQ,1587
@@ -106,25 +107,25 @@
 nucliadb/search/run.py,sha256=a687h4JWXwYOkNPFbBzJYMS16Z0Wiu2mkikbL9ujoiA,1011
 nucliadb/search/settings.py,sha256=Qk268YnWKOJxkTA0SM9BVw7aHHXdPPHv8WfzhE2VWIE,1162
 nucliadb/search/utilities.py,sha256=tlh048ZoFv-pUSjePiE-f_9J4nEqsJstQmhwS6Ke7Yw,1238
 nucliadb/search/api/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/search/api/v1/__init__.py,sha256=yljyGyrWNKsGuVewTnxB6CmDKGgdsu7dfkS67mZcUUA,1077
 nucliadb/search/api/v1/chat.py,sha256=TtsKTmZf23Rhlcqw9n0V3wFUJzE8PW0mx33LASjzD14,7419
 nucliadb/search/api/v1/feedback.py,sha256=xzUdWLM921vwNZYOuPvPog2A4VdEjWsN8b_5YdL5qxw,1831
-nucliadb/search/api/v1/find.py,sha256=oEAB0cPZaoJgj-5Nx3g-uiwEMnRDiKciUolZMbkUUqk,9831
-nucliadb/search/api/v1/knowledgebox.py,sha256=0m9FU5SoubAVeVwpHyPehSnxRL0JlsaaVQaZVN7TCRs,6957
-nucliadb/search/api/v1/resource.py,sha256=PBCyfOac2TX9Tg-jbY9AJrLASmufoprLU7QQMi9YyjM,4640
+nucliadb/search/api/v1/find.py,sha256=OtBinh_d1dX7ZlG9oRB7Xa0P7FLQGydwl8Mzsx2JFps,9648
+nucliadb/search/api/v1/knowledgebox.py,sha256=Hv-_x4f7QbRZcWoSoreUHSxzIytWe390-3QdtL7ATa8,6938
+nucliadb/search/api/v1/resource.py,sha256=xLEttr1JyDymxdW6W9Udc-57Ap5yx-vTZSUFXt9AunM,4637
 nucliadb/search/api/v1/router.py,sha256=QCO76-kVgkIlX9sG9ygoruo_0amRYdqfqR53aQsWpCA,980
-nucliadb/search/api/v1/search.py,sha256=wM9uFF723QOssT2_-q879ikLjAILscwXdUpvVY-I9mc,11574
-nucliadb/search/api/v1/suggest.py,sha256=j38YqlKiG08KLRSDGXNi0p-0WznjHUFvgsv41h4ztWo,4231
+nucliadb/search/api/v1/search.py,sha256=autXnR4yLRHSs-simRDWZQvYl8PmqmFR3rCYKHtMScY,11555
+nucliadb/search/api/v1/suggest.py,sha256=fp0ef1BMhkjX8kyTmR3aEmKrXHg2Q6J6FdcTVoGSO2I,4212
 nucliadb/search/requesters/__init__.py,sha256=itSI7dtTwFP55YMX4iK7JzdMHS5CQVUiB1XzQu4UBh8,833
-nucliadb/search/requesters/utils.py,sha256=6qBF9WHgurBC3CYa3n4k08oMrE_nQmw1O56OGEnJ9Zs,5892
+nucliadb/search/requesters/utils.py,sha256=JVuQVUdtBL5RZC3zhbZHoEnJS3vbw49E9Zm9wI0IegE,5873
 nucliadb/search/search/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
-nucliadb/search/search/fetch.py,sha256=kNUDKg5tmSiP3TCMY77r9vY5JpGPTQqM13GLvBELB3c,11833
-nucliadb/search/search/find_merge.py,sha256=TactNgQHMqAy1ztFhGbgAaK8FtjreZm81TsQ-IToNIc,14238
+nucliadb/search/search/fetch.py,sha256=k1ciJG2Xqx4MvprJM1kh8enoNbH0N9etM2bR6VMT8CA,11301
+nucliadb/search/search/find_merge.py,sha256=6H54UgWehYeLJVaKTfTsU3aJj9JH_Dw0QatPBgCAONY,14538
 nucliadb/search/search/merge.py,sha256=Jt5EwMy5dcYnQps0dK67Zut9J-u7O0I8lk4LOOK57so,18361
 nucliadb/search/search/metrics.py,sha256=CerbY5THtN6JbyTIRFBLAYGObdbHNO_WPv4YJBwnf5s,947
 nucliadb/search/search/query.py,sha256=iytswfUeh5tJIr30lTvZv6yZzmOQFqXmONbo_TWtn8U,9896
 nucliadb/search/search/shards.py,sha256=sgyhpE8mCqlXaUB9PNb7Zt_MFKgvEso9CNWJXQKzFcE,2647
 nucliadb/search/search/synonyms.py,sha256=PTViRCiSA7o4JWXSHuGMb_khwWlKAMxNjwv7tbeQ9-I,2055
 nucliadb/search/search/utils.py,sha256=NvoM6akDP3vrTTx7viqS5ChVafkBGYzpQ_7RVLrslXM,2479
 nucliadb/search/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
@@ -185,15 +186,15 @@
 nucliadb/train/api/v1/shards.py,sha256=EDV7fJkF-Elzpt0MSm-KxagzpAYks64Fr9NGW1vFdpM,1905
 nucliadb/train/api/v1/trainset.py,sha256=3EFwzn0zEF_IGhPT9DEXYZrCi3XB4HQLw2wnmUXGYeY,1825
 nucliadb/train/generators/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/train/generators/field_classifier.py,sha256=4hiJ_bvH3HY6dn8jZgc6YCDdeqHFd8YWuSB7jfuuyNc,3289
 nucliadb/train/generators/paragraph_classifier.py,sha256=oZ5GtMfk_sRhy9ClCGc2vGuIfHzBza7279sQeRy60as,3594
 nucliadb/train/generators/sentence_classifier.py,sha256=uZJzTK9v0LntPmSGPeIwp38xsMX9wioa5AxXXef4w9s,4767
 nucliadb/train/generators/token_classifier.py,sha256=JuyjxjG2uz7yEXUk489jR_7Xbe4GB-fan9CFvbejGdY,10176
-nucliadb/train/generators/utils.py,sha256=wQtn_HIrlpCvr_KnzLUSzdRNP187GW8u63tvR3zHqp4,2519
+nucliadb/train/generators/utils.py,sha256=Q-Vqy07lvYz8EFvbiGOxi3HPpFRhcld9DbWmq9khaQE,2144
 nucliadb/train/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/train/tests/conftest.py,sha256=MNH2umE3OKnJLXK3U6kZmpfW0GQcoZtwK6NfilXKXRs,1088
 nucliadb/train/tests/fixtures.py,sha256=o8_vq5O2ETrV34SWAppEs7CB4SvCnwkZGhRpie-x_bQ,8975
 nucliadb/train/tests/test_field_classification.py,sha256=Sg3V8dlKt9WgVqAQ2OLVz6CkbqNwK_jxAim4Fk1KmLc,8132
 nucliadb/train/tests/test_get_entities.py,sha256=ndcEemTcITB70X_GxSIkUiAoNOnpTamfyPaXVtXmgKQ,2729
 nucliadb/train/tests/test_get_info.py,sha256=uWKFC8uDXsmdzUp0xgNpEEuf5Ge9dNPE5CSfdZSDz_o,1660
 nucliadb/train/tests/test_get_ontology.py,sha256=Xjr-eIYQLzNkqFU3nwANmDi4fwY09VymdikC3ibgM8A,1382
@@ -204,41 +205,41 @@
 nucliadb/train/tests/test_list_sentences.py,sha256=YqofeZgXeUX4KJVOJiaiU1mx2G5qhkAIMa_FXrSxJck,2863
 nucliadb/train/tests/test_paragraph_classification.py,sha256=uj5KSsZCYXlrTOT-gUpFypcsGpVR3cNiXhF2nyhiHX0,8129
 nucliadb/train/tests/test_sentence_classification.py,sha256=Pj5qW4orGk3x_D48S-DmWLsYSEaSOzq7uZexvfVxiFg,8349
 nucliadb/train/tests/test_token_classification.py,sha256=yGsIWuHxp49WynzKAeLTxkoG-Z0TEiReqoPlITQeCHU,10122
 nucliadb/writer/__init__.py,sha256=HkfMuQR3CbbPU3g-A85Ibt8iwSTTADhLc0-pi3F3hvk,1328
 nucliadb/writer/app.py,sha256=kmnWWVhfN_oe3lWRpDQhd4hkobeKm-bQxjyn6lG_NAk,3578
 nucliadb/writer/exceptions.py,sha256=2dMvuoF68v3BZuyzaBEsbG6gusQqwLFcn47qm1zNdTc,972
-nucliadb/writer/lifecycle.py,sha256=uoYf2XXAOpCTWHm5mWgc3tejXX-9i8NPRCR0WaeLA4M,3865
+nucliadb/writer/lifecycle.py,sha256=3kgDjlizaYgC2sbu44tJxu99aj22brjRtQXYrflEUxw,3881
 nucliadb/writer/openapi.py,sha256=bpH-pzxdDRb9Dy0OcaB1U0ziuvIG416akVr-Dwz3ywM,2186
 nucliadb/writer/run.py,sha256=rwOc25ZDksaE2eaNSEZdwKB-pHDDgDSNi8a-BQrp3Ko,1011
 nucliadb/writer/settings.py,sha256=rphXdqI238b1bch0elcY3aY4qxQYe_wllnW7MPjmZyU,1062
 nucliadb/writer/utilities.py,sha256=AZ5qEny1Xm0IDsFtH13oJa2usvJZK8f0FdgF1LrnLCw,1036
 nucliadb/writer/api/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/writer/api/v1/__init__.py,sha256=50S5JnDp00NP8YKLlaWZ_ZDmJr7bioFteB400iKcel8,1021
-nucliadb/writer/api/v1/field.py,sha256=5O60L128wLNn8HCU02GtDS1yxbCp7kuA9X0VEY-Dnyw,22265
+nucliadb/writer/api/v1/field.py,sha256=qGywhrPmr7jCb7RgXsJGPS_jw9Fdlp9FJe51Fa-7SUg,22313
 nucliadb/writer/api/v1/knowledgebox.py,sha256=OcO8Al5TWObVfe1EXzg4DQ6EN0iK-6ZJ46JZa4J3D9M,5395
-nucliadb/writer/api/v1/resource.py,sha256=R6TdYEjyPXKwXVDQn8WEphja2IsxZndz480oCxl8sjA,15213
+nucliadb/writer/api/v1/resource.py,sha256=DnswYP58jfKiLhhc3lmH4NXnZXCUrqCMpZFJrkiPk5k,15253
 nucliadb/writer/api/v1/router.py,sha256=RjuoWLpZer6Kl2BW_wznpNo6XL3BOpdTGqXZCn3QrrQ,1034
 nucliadb/writer/api/v1/services.py,sha256=y8mo6ygwtw6ufnbb85s5JnJjJNdRdBIP_n34Hka7KJI,14132
-nucliadb/writer/api/v1/upload.py,sha256=8hLhTxf3Scgk-j5BJXODDD18rCZ5cWl4uQP15H2Nb2M,25454
+nucliadb/writer/api/v1/upload.py,sha256=XXNzWVZZoc4I01Vpm9lzOInNN71sf7F3Zoery2pX-5Y,25470
 nucliadb/writer/layouts/__init__.py,sha256=5VKT5WJya1EoI5aKq9MwzkN37QWAoihVRJeXDmiPGYs,1618
 nucliadb/writer/layouts/v1.py,sha256=Yc2idmfrpCS8js_XJByNWA_tmt2WeKoWvidLHoTPXoo,2115
 nucliadb/writer/resource/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/writer/resource/audit.py,sha256=SXPu_hdNBlm9uCSl666UQL7hzMx9zYVbBLT_U7ro8Gs,1425
 nucliadb/writer/resource/basic.py,sha256=sGTnEG-WZJvsCwv2ZObXhZWmtnr3duWsOBoxxKr1g5w,8554
 nucliadb/writer/resource/field.py,sha256=Dhn9gVoRn_RtQNXXhm7TEWsP-0-cqwVSfQcN_tfhVN4,15695
 nucliadb/writer/resource/origin.py,sha256=tnM8VW7vkrc_Sfql6QtDlxzuEsF_kJn4F56xjZvetfU,1708
 nucliadb/writer/resource/slug.py,sha256=xaYHmlooQTdaE8meuMTpbz11hVuOcMrAwculNf-uao4,1151
 nucliadb/writer/resource/vectors.py,sha256=-Z4vSwC632Prx6CBBE9X7Qx8QNkYUEXvn7j1KbZftz4,4991
 nucliadb/writer/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/writer/tests/conftest.py,sha256=NytcRRhwL17WbxXlyDP3N0-Z_yIH9qshNGf4xvzg4j0,1144
 nucliadb/writer/tests/fixtures.py,sha256=moOoCP1V1aBTYX_RDGkYv87dW27LbMsWLwGy_a7OAVs,4275
 nucliadb/writer/tests/test_fields.py,sha256=5uPe9VSVkdAHdva8snKzj3DtUuhwqN1wQxduGtEVtic,16585
-nucliadb/writer/tests/test_files.py,sha256=9Uma7MNGQ24Ql2F4nfrDA_mpRkmHlHpYfE4G247KMlE,21581
+nucliadb/writer/tests/test_files.py,sha256=OmWDSXIXteQozSkXH9q498rhSmAk5eHCZa7T2evP-Ak,21645
 nucliadb/writer/tests/test_knowledgebox.py,sha256=W8wJ5Ik1NIIDwCeoDKqA6Wo5Vhvbe-VKTXT6q7f5Txs,1932
 nucliadb/writer/tests/test_reprocess_file_field.py,sha256=_nQOauQhnQz-ZsD_jaHqa3UPX8rB2ejU1ZZu4g03roA,4747
 nucliadb/writer/tests/test_resources.py,sha256=acHO29yYln4WguBjTbyqRbau4VQBiD1dzs0F02v4dUI,19059
 nucliadb/writer/tests/test_service.py,sha256=kau-mAhj6r3nPO1-zT0r_OJeU6uuZcn0l0ZB8Qcpbys,5345
 nucliadb/writer/tests/test_tus.py,sha256=-ggQckT2Te11wH58Q_SlUk23350OrxDkXzzlaeS8vDY,3596
 nucliadb/writer/tests/tus.py,sha256=zjffuaDkvNdFc4sbark5XB-Uxf74XZuE6AyyU6rzfrE,2028
 nucliadb/writer/tests/utils.py,sha256=eSyyTCMERC-EzeBrBAurSIZCpqgH67wc1wHZ1KjO1DM,1287
@@ -246,13 +247,13 @@
 nucliadb/writer/tus/dm.py,sha256=SnRSZhN35XgGRWUdcxXQ-Iu7Ae182MfRQEKj467hrJc,4396
 nucliadb/writer/tus/exceptions.py,sha256=CmxYKnHXpXug25DYV4SpVAU47SGD-NVBd7pNTRbWHyk,2186
 nucliadb/writer/tus/gcs.py,sha256=DdnCTwtd3N87yaPUl-n3LJfUDdHVGav-w1LBOUnUNWg,13818
 nucliadb/writer/tus/local.py,sha256=BM2_uZwh3qd4CsGaIzNL4EBzv9lNjgtSP0cnLPdMJek,5811
 nucliadb/writer/tus/s3.py,sha256=5gpiYTGAJsLN2j55FBSq-E9kLbMn5tvNDZeNRzo3yj0,8571
 nucliadb/writer/tus/storage.py,sha256=Ba085-LkOjbHsYKh6u3NA40b1PSPzS20YHJqIa6kvG0,4682
 nucliadb/writer/tus/utils.py,sha256=40VRRKjKJgt-pYbWH9eX-jnQFze1_NkqI8ehe-wSZ8U,2580
-nucliadb-2.7.0.post145.dist-info/METADATA,sha256=pl9ztQ2hr5Nbd4S_wHiA-jcvYUYpo8TEMeuFtEJxdBU,3143
-nucliadb-2.7.0.post145.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-nucliadb-2.7.0.post145.dist-info/entry_points.txt,sha256=1_OyDuPKy8lYGSiRs9zcTp25AkGS0AIAp9rbx_feFiI,735
-nucliadb-2.7.0.post145.dist-info/top_level.txt,sha256=K5XbWCHfZ7wve-wIrOSTuE0y-jVJSKVS9ZTDJ4TKhKQ,9
-nucliadb-2.7.0.post145.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
-nucliadb-2.7.0.post145.dist-info/RECORD,,
+nucliadb-2.7.0.post146.dist-info/METADATA,sha256=610UuSWH97U6jnnXp-QbBFjUEKMT3l3a6JFTvCQoZUc,3143
+nucliadb-2.7.0.post146.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+nucliadb-2.7.0.post146.dist-info/entry_points.txt,sha256=1_OyDuPKy8lYGSiRs9zcTp25AkGS0AIAp9rbx_feFiI,735
+nucliadb-2.7.0.post146.dist-info/top_level.txt,sha256=K5XbWCHfZ7wve-wIrOSTuE0y-jVJSKVS9ZTDJ4TKhKQ,9
+nucliadb-2.7.0.post146.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
+nucliadb-2.7.0.post146.dist-info/RECORD,,
```

