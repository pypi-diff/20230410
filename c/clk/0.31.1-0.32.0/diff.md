# Comparing `tmp/clk-0.31.1-py2.py3-none-any.whl.zip` & `tmp/clk-0.32.0-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,61 +1,61 @@
-Zip file size: 111079 bytes, number of entries: 59
--rw-r--r--  2.0 unx      817 b- defN 23-Mar-08 09:45 clk/__init__.py
--rw-r--r--  2.0 unx      113 b- defN 23-Mar-08 09:45 clk/__main__.py
--rw-r--r--  2.0 unx      498 b- defN 23-Mar-08 09:45 clk/_version.py
--rw-r--r--  2.0 unx    10784 b- defN 23-Mar-08 09:45 clk/alias.py
--rw-r--r--  2.0 unx      257 b- defN 23-Mar-08 09:45 clk/atexit.py
--rw-r--r--  2.0 unx      197 b- defN 23-Mar-08 09:45 clk/click_helpers.py
--rw-r--r--  2.0 unx     6345 b- defN 23-Mar-08 09:45 clk/colors.py
--rw-r--r--  2.0 unx      350 b- defN 23-Mar-08 09:45 clk/commandresolver.py
--rw-r--r--  2.0 unx      609 b- defN 23-Mar-08 09:45 clk/completion.py
--rw-r--r--  2.0 unx    24153 b- defN 23-Mar-08 09:45 clk/config.py
--rw-r--r--  2.0 unx    25556 b- defN 23-Mar-08 09:45 clk/core.py
--rw-r--r--  2.0 unx     2927 b- defN 23-Mar-08 09:45 clk/customcommands.py
--rw-r--r--  2.0 unx     9516 b- defN 23-Mar-08 09:45 clk/decorators.py
--rw-r--r--  2.0 unx    10627 b- defN 23-Mar-08 09:45 clk/externalcommands.py
--rw-r--r--  2.0 unx    11284 b- defN 23-Mar-08 09:45 clk/flow.py
--rw-r--r--  2.0 unx     2836 b- defN 23-Mar-08 09:45 clk/hook.py
--rw-r--r--  2.0 unx     1035 b- defN 23-Mar-08 09:45 clk/java.py
--rw-r--r--  2.0 unx      317 b- defN 23-Mar-08 09:45 clk/keyring_netrc.py
--rw-r--r--  2.0 unx     5027 b- defN 23-Mar-08 09:45 clk/keyvaluestore.py
--rw-r--r--  2.0 unx     2187 b- defN 23-Mar-08 09:45 clk/launcher.py
--rw-r--r--  2.0 unx    47887 b- defN 23-Mar-08 09:45 clk/lib.py
--rw-r--r--  2.0 unx      566 b- defN 23-Mar-08 09:45 clk/liblp.py
--rw-r--r--  2.0 unx     4070 b- defN 23-Mar-08 09:45 clk/log.py
--rw-r--r--  2.0 unx     1274 b- defN 23-Mar-08 09:45 clk/main.py
--rw-r--r--  2.0 unx      409 b- defN 23-Mar-08 09:45 clk/monkeypatch.py
--rw-r--r--  2.0 unx      578 b- defN 23-Mar-08 09:45 clk/netrc.py
--rw-r--r--  2.0 unx    56395 b- defN 23-Mar-08 09:45 clk/overloads.py
--rw-r--r--  2.0 unx      571 b- defN 23-Mar-08 09:45 clk/plugin.py
--rw-r--r--  2.0 unx    29718 b- defN 23-Mar-08 09:45 clk/profile.py
--rw-r--r--  2.0 unx     3043 b- defN 23-Mar-08 09:45 clk/setup.py
--rw-r--r--  2.0 unx     1151 b- defN 23-Mar-08 09:45 clk/triggers.py
--rw-r--r--  2.0 unx     3813 b- defN 23-Mar-08 09:45 clk/types.py
--rw-r--r--  2.0 unx        0 b- defN 23-Mar-08 09:45 clk/commands/__init__.py
--rw-r--r--  2.0 unx    11121 b- defN 23-Mar-08 09:45 clk/commands/alias.py
--rw-r--r--  2.0 unx     3882 b- defN 23-Mar-08 09:45 clk/commands/completion.py
--rw-r--r--  2.0 unx      335 b- defN 23-Mar-08 09:45 clk/commands/describe.py
--rw-r--r--  2.0 unx      636 b- defN 23-Mar-08 09:45 clk/commands/echo.py
--rw-r--r--  2.0 unx     5104 b- defN 23-Mar-08 09:45 clk/commands/env.py
--rw-r--r--  2.0 unx     1430 b- defN 23-Mar-08 09:45 clk/commands/exec.py
--rw-r--r--  2.0 unx    23936 b- defN 23-Mar-08 09:45 clk/commands/extension.py
--rw-r--r--  2.0 unx    13490 b- defN 23-Mar-08 09:45 clk/commands/flowdep.py
--rw-r--r--  2.0 unx     2380 b- defN 23-Mar-08 09:45 clk/commands/fork.py
--rw-r--r--  2.0 unx      397 b- defN 23-Mar-08 09:45 clk/commands/help.py
--rw-r--r--  2.0 unx     4290 b- defN 23-Mar-08 09:45 clk/commands/launcher.py
--rw-r--r--  2.0 unx      684 b- defN 23-Mar-08 09:45 clk/commands/log.py
--rw-r--r--  2.0 unx     8415 b- defN 23-Mar-08 09:45 clk/commands/parameter.py
--rw-r--r--  2.0 unx     3923 b- defN 23-Mar-08 09:45 clk/commands/password.py
--rw-r--r--  2.0 unx      382 b- defN 23-Mar-08 09:45 clk/commands/pip.py
--rw-r--r--  2.0 unx     6323 b- defN 23-Mar-08 09:45 clk/commands/plugin.py
--rw-r--r--  2.0 unx     6652 b- defN 23-Mar-08 09:45 clk/commands/trigger.py
--rw-r--r--  2.0 unx      669 b- defN 23-Mar-08 09:45 clk/commands/value.py
--rw-r--r--  2.0 unx    18690 b- defN 23-Mar-08 09:45 clk/commands/command/__init__.py
--rw-r--r--  2.0 unx     2985 b- defN 23-Mar-08 09:45 clk/commands/command/_clk.sh
--rw-r--r--  2.0 unx     1082 b- defN 23-Mar-08 09:45 clk-0.31.1.dist-info/LICENSE
--rw-r--r--  2.0 unx      785 b- defN 23-Mar-08 09:45 clk-0.31.1.dist-info/METADATA
--rw-r--r--  2.0 unx      110 b- defN 23-Mar-08 09:45 clk-0.31.1.dist-info/WHEEL
--rw-r--r--  2.0 unx       38 b- defN 23-Mar-08 09:45 clk-0.31.1.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        4 b- defN 23-Mar-08 09:45 clk-0.31.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     4423 b- defN 23-Mar-08 09:45 clk-0.31.1.dist-info/RECORD
-59 files, 387076 bytes uncompressed, 104313 bytes compressed:  73.1%
+Zip file size: 111225 bytes, number of entries: 59
+-rw-r--r--  2.0 unx      817 b- defN 23-Apr-10 14:04 clk/__init__.py
+-rw-r--r--  2.0 unx      113 b- defN 23-Apr-10 14:04 clk/__main__.py
+-rw-r--r--  2.0 unx      498 b- defN 23-Apr-10 14:04 clk/_version.py
+-rw-r--r--  2.0 unx    10784 b- defN 23-Apr-10 14:04 clk/alias.py
+-rw-r--r--  2.0 unx      257 b- defN 23-Apr-10 14:04 clk/atexit.py
+-rw-r--r--  2.0 unx      197 b- defN 23-Apr-10 14:04 clk/click_helpers.py
+-rw-r--r--  2.0 unx     6345 b- defN 23-Apr-10 14:04 clk/colors.py
+-rw-r--r--  2.0 unx      350 b- defN 23-Apr-10 14:04 clk/commandresolver.py
+-rw-r--r--  2.0 unx      609 b- defN 23-Apr-10 14:04 clk/completion.py
+-rw-r--r--  2.0 unx    24153 b- defN 23-Apr-10 14:04 clk/config.py
+-rw-r--r--  2.0 unx    25556 b- defN 23-Apr-10 14:04 clk/core.py
+-rw-r--r--  2.0 unx     2927 b- defN 23-Apr-10 14:04 clk/customcommands.py
+-rw-r--r--  2.0 unx     9516 b- defN 23-Apr-10 14:04 clk/decorators.py
+-rw-r--r--  2.0 unx    10627 b- defN 23-Apr-10 14:04 clk/externalcommands.py
+-rw-r--r--  2.0 unx    11284 b- defN 23-Apr-10 14:04 clk/flow.py
+-rw-r--r--  2.0 unx     2836 b- defN 23-Apr-10 14:04 clk/hook.py
+-rw-r--r--  2.0 unx     1035 b- defN 23-Apr-10 14:04 clk/java.py
+-rw-r--r--  2.0 unx      317 b- defN 23-Apr-10 14:04 clk/keyring_netrc.py
+-rw-r--r--  2.0 unx     5027 b- defN 23-Apr-10 14:04 clk/keyvaluestore.py
+-rw-r--r--  2.0 unx     2187 b- defN 23-Apr-10 14:04 clk/launcher.py
+-rw-r--r--  2.0 unx    47887 b- defN 23-Apr-10 14:04 clk/lib.py
+-rw-r--r--  2.0 unx      629 b- defN 23-Apr-10 14:04 clk/liblp.py
+-rw-r--r--  2.0 unx     4070 b- defN 23-Apr-10 14:04 clk/log.py
+-rw-r--r--  2.0 unx     1274 b- defN 23-Apr-10 14:04 clk/main.py
+-rw-r--r--  2.0 unx      409 b- defN 23-Apr-10 14:04 clk/monkeypatch.py
+-rw-r--r--  2.0 unx      578 b- defN 23-Apr-10 14:04 clk/netrc.py
+-rw-r--r--  2.0 unx    56449 b- defN 23-Apr-10 14:04 clk/overloads.py
+-rw-r--r--  2.0 unx      571 b- defN 23-Apr-10 14:04 clk/plugin.py
+-rw-r--r--  2.0 unx    29744 b- defN 23-Apr-10 14:04 clk/profile.py
+-rw-r--r--  2.0 unx     3043 b- defN 23-Apr-10 14:04 clk/setup.py
+-rw-r--r--  2.0 unx     1151 b- defN 23-Apr-10 14:04 clk/triggers.py
+-rw-r--r--  2.0 unx     3813 b- defN 23-Apr-10 14:04 clk/types.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-10 14:04 clk/commands/__init__.py
+-rw-r--r--  2.0 unx    11121 b- defN 23-Apr-10 14:04 clk/commands/alias.py
+-rw-r--r--  2.0 unx     3882 b- defN 23-Apr-10 14:04 clk/commands/completion.py
+-rw-r--r--  2.0 unx      335 b- defN 23-Apr-10 14:04 clk/commands/describe.py
+-rw-r--r--  2.0 unx      636 b- defN 23-Apr-10 14:04 clk/commands/echo.py
+-rw-r--r--  2.0 unx     5104 b- defN 23-Apr-10 14:04 clk/commands/env.py
+-rw-r--r--  2.0 unx     1430 b- defN 23-Apr-10 14:04 clk/commands/exec.py
+-rw-r--r--  2.0 unx    24302 b- defN 23-Apr-10 14:04 clk/commands/extension.py
+-rw-r--r--  2.0 unx    13490 b- defN 23-Apr-10 14:04 clk/commands/flowdep.py
+-rw-r--r--  2.0 unx     2380 b- defN 23-Apr-10 14:04 clk/commands/fork.py
+-rw-r--r--  2.0 unx      397 b- defN 23-Apr-10 14:04 clk/commands/help.py
+-rw-r--r--  2.0 unx     4290 b- defN 23-Apr-10 14:04 clk/commands/launcher.py
+-rw-r--r--  2.0 unx      684 b- defN 23-Apr-10 14:04 clk/commands/log.py
+-rw-r--r--  2.0 unx     8415 b- defN 23-Apr-10 14:04 clk/commands/parameter.py
+-rw-r--r--  2.0 unx     3923 b- defN 23-Apr-10 14:04 clk/commands/password.py
+-rw-r--r--  2.0 unx      382 b- defN 23-Apr-10 14:04 clk/commands/pip.py
+-rw-r--r--  2.0 unx     6323 b- defN 23-Apr-10 14:04 clk/commands/plugin.py
+-rw-r--r--  2.0 unx     6652 b- defN 23-Apr-10 14:04 clk/commands/trigger.py
+-rw-r--r--  2.0 unx      669 b- defN 23-Apr-10 14:04 clk/commands/value.py
+-rw-r--r--  2.0 unx    18690 b- defN 23-Apr-10 14:04 clk/commands/command/__init__.py
+-rw-r--r--  2.0 unx     3026 b- defN 23-Apr-10 14:04 clk/commands/command/_clk.sh
+-rw-r--r--  2.0 unx     1082 b- defN 23-Apr-10 14:04 clk-0.32.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx      785 b- defN 23-Apr-10 14:04 clk-0.32.0.dist-info/METADATA
+-rw-r--r--  2.0 unx      110 b- defN 23-Apr-10 14:04 clk-0.32.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       38 b- defN 23-Apr-10 14:04 clk-0.32.0.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        4 b- defN 23-Apr-10 14:04 clk-0.32.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     4423 b- defN 23-Apr-10 14:04 clk-0.32.0.dist-info/RECORD
+59 files, 387626 bytes uncompressed, 104459 bytes compressed:  73.1%
```

## zipnote {}

```diff
@@ -153,26 +153,26 @@
 
 Filename: clk/commands/command/__init__.py
 Comment: 
 
 Filename: clk/commands/command/_clk.sh
 Comment: 
 
-Filename: clk-0.31.1.dist-info/LICENSE
+Filename: clk-0.32.0.dist-info/LICENSE
 Comment: 
 
-Filename: clk-0.31.1.dist-info/METADATA
+Filename: clk-0.32.0.dist-info/METADATA
 Comment: 
 
-Filename: clk-0.31.1.dist-info/WHEEL
+Filename: clk-0.32.0.dist-info/WHEEL
 Comment: 
 
-Filename: clk-0.31.1.dist-info/entry_points.txt
+Filename: clk-0.32.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: clk-0.31.1.dist-info/top_level.txt
+Filename: clk-0.32.0.dist-info/top_level.txt
 Comment: 
 
-Filename: clk-0.31.1.dist-info/RECORD
+Filename: clk-0.32.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## clk/_version.py

```diff
@@ -4,18 +4,18 @@
 # unpacked source archive. Distribution tarballs contain a pre-generated copy
 # of this file.
 
 import json
 
 version_json = '''
 {
- "date": "2023-03-06T15:07:39+0100",
+ "date": "2023-04-09T23:18:12+0200",
  "dirty": false,
  "error": null,
- "full-revisionid": "b477aa201cadbd0015fde92c4b100499f15dbc56",
- "version": "0.31.1"
+ "full-revisionid": "6cacc431889bd828cfab6323797a88a9f810c86e",
+ "version": "0.32.0"
 }
 '''  # END VERSION_JSON
 
 
 def get_versions():
     return json.loads(version_json)
```

## clk/liblp.py

```diff
@@ -1,10 +1,10 @@
 #!/usr/bin/env python
 # -*- coding: utf-8 -*-
-
+# [[file:lib.org::*weave][weave:1]]
 # GENERATED USING lib.org, DO NOT EDIT
 
 import os
 import shutil
 
 from clk.log import get_logger
 
@@ -23,7 +23,11 @@
     if dry_run:
         return
     for f in file_or_tree:
         if os.path.isdir(f) and not os.path.islink(f):
             shutil.rmtree(f)
         else:
             os.unlink(f)
+
+
+# end
+# weave:1 ends here
```

## clk/overloads.py

```diff
@@ -1074,16 +1074,16 @@
                 return value
 
         kwargs['callback'] = new_callback
     kwargs.setdefault('cls', Argument)
     return click.argument(*args, **kwargs)
 
 
-def flow_command(flowdepends=(), flow_from=None, flow_after=None, **kwargs):
-    closure_flowdepends = flowdepends
+def flow_command(flowdepends=None, flow_from=None, flow_after=None, **kwargs):
+    closure_flowdepends = flowdepends or []
 
     def decorator(f):
         try:
             params = list(f.__click_params__)
             params.reverse()
         except AttributeError:
             params = []
@@ -1372,14 +1372,15 @@
             raise Exception("No '%s' argument in the '%s' command" % (target_argument, target_command.name))
         self.target_command = target_command
         self.target_parameter = o
         okwargs = deepcopy(o.__dict__)
         del okwargs['name']
         del okwargs['opts']
         del okwargs['secondary_opts']
+        del okwargs['_custom_shell_complete']
         del okwargs['multiple']
         # change the default value to None in order to detect when the value should be passed to the previous commands
         # in the flow
         okwargs['default'] = None
         Argument.__init__(self, param_decls, **okwargs)
```

## clk/profile.py

```diff
@@ -634,15 +634,15 @@
         makedirs(self.location)
         version = self.version
         createfile(self.version_file_name, ensure_unicode(str(version) + '\n'), internal=True)
 
     def migrate_if_needed(self, persist=True):
         self.persist = persist
         if (self.version < self.max_version or (self.persist and self.prevented_persistence)):
-            if self.persist:
+            if self.persist and self.old_version != 0:
                 LOGGER.warning('Profile in {} is obsolete.'
                                ' It has the version {} and current version is {}.'
                                ' Migration started.'.format(self.location, self.old_version, self.max_version))
             if (self.migrate(persist=self.persist) or (self.prevented_persistence and self.persist)):
                 if self.persist:
                     self.frozen_during_migration = False
                     self.prevented_persistence = False
```

## clk/commands/extension.py

```diff
@@ -462,16 +462,17 @@
           ' a path to a local directory'
           ' (not that in that case, using --editable makes sense).'),
 )
 @argument('name', help='The name of the extension', required=False)
 @flag('--install-deps/--no-install-deps', help='Automatically install the dependencies.', default=True)
 @flag('--force/--no-force', help='Overwrite the existing extension if need be.')
 @flag('-e', '--editable', help='(only for local path) Create a symbolic link rather than copying the content')
+@flag('--break-system-packages', help='Use this flag of pip')
 @pass_context
-def install(ctx, profile, url, name, install_deps, editable, force):
+def install(ctx, profile, url, name, install_deps, editable, force, break_system_packages):
     """Install an extension from outside"""
     profile = profile or config.global_profile
     name, urls, install_type = process_url(name, url)
     if name is None:
         raise click.UsageError('I cannot infer a name for your extension. Please provide one explicitly.')
 
     if not re.match(f'^{DirectoryProfile.extension_name_re}$', name):
@@ -535,32 +536,37 @@
             move(file, extension_path)
         (extension_path / 'url').write_text(url)
 
     extension = profile.get_extension(name)
 
     if install_deps is True:
         LOGGER.status('-> Installing the dependencies of the extension')
-        ctx.invoke(_install_deps, extension=[extension])
+        ctx.invoke(_install_deps, extension=[extension], break_system_packages=break_system_packages)
     LOGGER.status(f'Done installing the extension {name}')
 
 
 @extension.command()
 @argument(
     'extension',
     type=DirectoryProfileType(),
     nargs=-1,
     help='The name of the extensions to consider',
 )
+@flag('--break-system-packages', help='Use this flag of pip')
 @pass_context
-def _install_deps(ctx, extension):
+def _install_deps(ctx, extension, break_system_packages):
     'Install the dependencies of the extension'
     for rec in extension:
         LOGGER.status('Handling {}'.format(rec.friendly_name))
         if rec.requirements_path.exists():
-            ctx.invoke(pip, args=('install', '--upgrade', '-r', rec.requirements_path))
+            pip_args = ['install']
+            if break_system_packages:
+                pip_args += ['--break-system-packages']
+            pip_args += ['--upgrade', '-r', rec.requirements_path]
+            ctx.invoke(pip, args=pip_args)
         else:
             LOGGER.info(f'Nothing to be done for {rec.friendly_name}')
 
 
 @extension.command()
 @argument(
     'extension',
```

## clk/commands/command/_clk.sh

```diff
@@ -44,14 +44,18 @@
 }
 
 clk_true ( ) {
     local name="$1"
     test "$(clk_value "${name}")" = "True"
 }
 
+clk_false ( ) {
+    ! clk_true "${@}"
+}
+
 clk_import ( ) {
     local dep="$1"
     source "$(dirname "${0}")/lib/${dep}"
 }
 
 clk_file ( ) {
     local name="$1"
```

## Comparing `clk-0.31.1.dist-info/LICENSE` & `clk-0.32.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `clk-0.31.1.dist-info/METADATA` & `clk-0.32.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: clk
-Version: 0.31.1
+Version: 0.32.0
 Summary: A framework to help you have an awesome CLI
 Author: Samuel Loury
 Author-email: konubinixweb@gmail.com
 Requires-Python: >=3.8
 License-File: LICENSE
 Requires-Dist: click (>=8)
 Requires-Dist: click-log
```

